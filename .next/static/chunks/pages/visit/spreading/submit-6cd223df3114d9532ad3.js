_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[42],{"4lBl":function(e,t,i){e.exports={modal:"Modal_modal__2IoMM"}},"5PhN":function(e,t,i){"use strict";var n=i("nKUr"),a=(i("q1tI"),i("M7ZG")),r=i.n(a);t.a=function(e){var t=e.children,i=e.style,a=e.shadow;return Object(n.jsx)("div",{className:"".concat(r.a.container," ").concat(a?r.a.shadow:""),style:i||{},children:t})}},Dfhs:function(e,t,i){e.exports={container:"VisitPlanDetail_container__2jr6z",wrapper:"VisitPlanDetail_wrapper__1k2PA",main:"VisitPlanDetail_main__2JVTk",render_data:"VisitPlanDetail_render_data__UG0Yf",avability_modal_subtitle:"VisitPlanDetail_avability_modal_subtitle__cImGw",render_value:"VisitPlanDetail_render_value__2U7Gk",input:"VisitPlanDetail_input__3EeAf",input_order_search:"VisitPlanDetail_input_order_search__3uxsM",input_order:"VisitPlanDetail_input_order__1WXcP",visibility_grid:"VisitPlanDetail_visibility_grid__eKqRB",grid_50:"VisitPlanDetail_grid_50__xScpT",visibility_grid_history:"VisitPlanDetail_visibility_grid_history__3RjRi",visibility_dropdown:"VisitPlanDetail_visibility_dropdown__1NliU",new_button:"VisitPlanDetail_new_button__3zBx9",input_file:"VisitPlanDetail_input_file__2mLHX",progress_bar:"VisitPlanDetail_progress_bar__Cz8_8",progress_bar_now:"VisitPlanDetail_progress_bar_now__3w_Ar",avability_bot_container:"VisitPlanDetail_avability_bot_container__1vyIh",avability_modal_container:"VisitPlanDetail_avability_modal_container__1BVd4",avability_modal_main:"VisitPlanDetail_avability_modal_main__isfSW",modal_avability:"VisitPlanDetail_modal_avability__3bVY8",hidden_overflow:"VisitPlanDetail_hidden_overflow__35jOV",add_title:"VisitPlanDetail_add_title__20KUY",stock_order_container:"VisitPlanDetail_stock_order_container__1-0Au",avg_sales_container:"VisitPlanDetail_avg_sales_container__2ZL8F",avabilitylist_title:"VisitPlanDetail_avabilitylist_title__3iIBI",avabilitylist_stock_container:"VisitPlanDetail_avabilitylist_stock_container__1iSbF",avabilitylist_container:"VisitPlanDetail_avabilitylist_container__WpqI9",avabilitylist_subtitle:"VisitPlanDetail_avabilitylist_subtitle__2LI2L",avabilitylist_value:"VisitPlanDetail_avabilitylist_value__21-Yx",search_fixed:"VisitPlanDetail_search_fixed__3uZmj",nav_box:"VisitPlanDetail_nav_box__2aVI9"}},GKTS:function(e,t,i){e.exports={container:"Button_container__37SWQ",container_white:"Button_container_white__zoABs"}},JkA1:function(e,t,i){"use strict";var n=i("nKUr"),a=(i("q1tI"),i("YFqc")),r=i.n(a),s=i("mPD6"),l=i.n(s);t.a=function(e){var t=e.backHref,i=e.title,a=e.action,s=e.color,c=e.onClick,o=e.backAction,d=e.noBack,u=e.disable;return Object(n.jsxs)("div",{className:"green"==s?"".concat(l.a.nav_green," ").concat(l.a.nav_container):"white"==s?"".concat(l.a.nav_white," ").concat(l.a.nav_container):l.a.nav_container,children:[t?Object(n.jsx)(r.a,{href:t||"/",children:Object(n.jsx)("a",{children:Object(n.jsx)("img",{style:{width:"24px"},src:"/arrow-left.svg"})})}):d?Object(n.jsx)("div",{}):Object(n.jsx)("img",{onClick:function(){o()},style:{width:"24px"},src:"/arrow-left.svg"}),Object(n.jsx)("div",{style:{textAlign:"center"},className:l.a.title,children:i}),a&&!1===u?Object(n.jsx)("div",{onClick:c,style:{fontSize:"14px",margin:"auto",color:"#41867A",cursor:"pointer"},children:a}):a&&!0===u?Object(n.jsx)("div",{onClick:c,style:{fontSize:"14px",margin:"auto",color:"#c4c4c4",cursor:"pointer"},children:a}):null]})}},M7ZG:function(e,t,i){e.exports={container:"Card_container__2ez1c",shadow:"Card_shadow__Tq5_x"}},M9MU:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return g}));var n=i("nKUr"),a=i("q1tI"),r=i("YFqc"),s=i.n(r),l=i("20a2"),c=i.n(l),o=i("Dfhs"),d=i.n(o),u=i("kQFM"),_=i("JkA1"),v=i("UV+Q"),b=i("5PhN"),p=i("fj1f"),h=i("es2X"),j=i("ECGM");function g(){var e=Object(a.useContext)(u.b),t=e.state,i=(e.dispatch,e.actions),r=Object(a.useState)(!1),o=r[0],g=(r[1],Object(a.useState)(!1)),f=g[0],m=g[1],x=Object(a.useState)(!1),O=x[0],y=x[1],S=Object(a.useState)([]),w=(S[0],S[1],Object(a.useState)("")),C=w[0],k=w[1],R=Object(a.useState)([]),I=R[0],D=R[1],V=Object(a.useState)(!1),P=V[0],N=V[1],A=Object(a.useState)({}),J=(A[0],A[1]),B=Object(a.useState)(!1),M=B[0],q=B[1],L=Object(l.useRouter)(),E=new Date;Object(a.useEffect)((function(){L.query.new?(y(!0),t.visitSpreadingReducer.checkIn||i.setSpreadingCheckIn(E),k(t.visitSpreadingReducer.jenisChannel.namaJenisChannel),t.visitSpreadingReducer.jenisChannel.namaJenisChannel&&t.visitSpreadingReducer.outlet.namaOutlet&&k(t.visitSpreadingReducer.jenisChannel.namaJenisChannel)):t.visitSpreadingReducer.jenisChannel.namaJenisChannel&&t.visitSpreadingReducer.outlet.namaOutlet?(t.visitSpreadingReducer.checkIn||i.setSpreadingCheckIn(E),k(t.visitSpreadingReducer.jenisChannel.namaJenisChannel)):c.a.push("/visit/spreading")}),[]);var T=function(e){N(!0),k(e),e?Object(j.w)(e).then((function(e){D(e)})).catch((function(e){console.log(e)})):D([])},U=function(e,a){var r=t.visitSpreadingReducer.visibility.filter((function(e){return null!==e.file&&null!==e.type&&null!==e.brand})),l=t.visitSpreadingReducer.avability;return O?Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:d.a.render_data,children:[e,Object(n.jsx)("div",{style:{textAlign:"right"},children:"Visibility"===e?"".concat(r.length,"/8"):"Avability"===e?"".concat(l.length,"/25"):""})]}),"Jenis Channel"===e?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("input",{onChange:function(e){T(e.target.value),i.setSpreadingAvability([])},value:C,placeholder:"Search",className:d.a.input,onBlur:function(){setTimeout((function(){N(!1)}),200)},onFocus:function(e){return T(e.target.value)}}),P?Object(n.jsx)("div",{style:{position:"absolute",maxHeight:"180px",backgroundColor:"white",overflowY:"scroll",maxWidth:"400px",padding:"0 4px",zIndex:999999,marginTop:"-10px"},children:I.map((function(e,t){return Object(n.jsx)("div",{onClick:function(){J(e),i.setSpreadingJenisChannel(e),k(e.namaJenisChannel),D([])},style:{borderBottom:".5px solid #f0f0f0",width:"350px"},children:e.namaJenisChannel},t)}))}):null]}):"Outlet"===e?Object(n.jsx)(b.a,{style:{marginTop:"6px",borderRadius:"5px"},children:Object(n.jsx)("div",{className:d.a.render_value,children:Object(n.jsx)("textarea",{style:{width:"100%",border:"none",height:"20px"},onChange:function(e){i.setSpreadingNewOutlet(e.target.value)},value:t.visitSpreadingReducer.newOutlet})})}):"Alamat"===e?Object(n.jsx)(b.a,{style:{marginTop:"6px",borderRadius:"5px"},children:Object(n.jsx)("div",{className:d.a.render_value,children:Object(n.jsx)("textarea",{style:{width:"100%",border:"none",height:"70px"},onChange:function(e){i.setSpreadingAlamat(e.target.value)},value:t.visitSpreadingReducer.alamat})})}):"Catatan"===e?Object(n.jsx)(b.a,{style:{marginTop:"6px",borderRadius:"5px"},children:Object(n.jsx)("div",{className:d.a.render_value,children:Object(n.jsx)("textarea",{style:{width:"100%",border:"none",height:"70px"},onChange:function(e){i.setSpreadingCatatan(e.target.value)},value:t.visitSpreadingReducer.catatan})})}):"Visibility"===e||"Avability"===e?Object(n.jsx)(b.a,{style:{marginTop:"6px",borderRadius:"5px"},children:Object(n.jsxs)("div",{className:d.a.render_value,children:[Object(n.jsx)("div",{children:"Visibility"===e?Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:d.a.progress_bar}),Object(n.jsx)("div",{className:d.a.progress_bar_now,style:{width:"".concat(r.length/8*100,"%")}})]}):"Avability"===e?Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:d.a.progress_bar}),Object(n.jsx)("div",{className:d.a.progress_bar_now,style:{width:"".concat(l.length/25*100,"%")}})]}):""}),"Avability"===e?t.visitSpreadingReducer.jenisChannel.namaJenisChannel?Object(n.jsx)(s.a,{href:"/visit/spreading/submit/avability?new=true",children:Object(n.jsx)("a",{children:Object(n.jsx)(h.a,{text:"Add"})})}):Object(n.jsx)(h.a,{text:"Add"}):"Visibility"===e?Object(n.jsx)(s.a,{href:"/visit/spreading/submit/visibility?new=true",children:Object(n.jsx)("a",{children:Object(n.jsx)(h.a,{text:"Add"})})}):null]})}):Object(n.jsx)(b.a,{style:{marginTop:"6px",borderRadius:"5px"},children:Object(n.jsx)("div",{className:d.a.render_value,children:Object(n.jsx)(n.Fragment,{children:a})})})]}):Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:d.a.render_data,children:[e,Object(n.jsx)("div",{style:{textAlign:"right"},children:"Visibility"===e?"".concat(r.length,"/8"):"Avability"===e?"".concat(l.length,"/25"):""})]}),Object(n.jsx)(b.a,{style:{marginTop:"6px",borderRadius:"5px"},children:Object(n.jsx)("div",{className:d.a.render_value,children:"Catatan"===e?Object(n.jsx)("textarea",{style:{width:"100%",border:"none",height:"70px"},onChange:function(e){i.setSpreadingCatatan(e.target.value)},value:t.visitSpreadingReducer.catatan}):"Visibility"===e||"Avability"===e?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{children:"Visibility"===e?Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:d.a.progress_bar}),Object(n.jsx)("div",{className:d.a.progress_bar_now,style:{width:"".concat(r.length/8*100,"%")}})]}):"Avability"===e?Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:d.a.progress_bar}),Object(n.jsx)("div",{className:d.a.progress_bar_now,style:{width:"".concat(l.length/25*100,"%")}})]}):""}),Object(n.jsx)(s.a,{href:"Visibility"===e?"/visit/spreading/submit/visibility":"Avability"===e?"/visit/spreading/submit/avability":"",children:Object(n.jsx)("a",{children:Object(n.jsx)(h.a,{text:"Add"})})})]}):Object(n.jsx)(n.Fragment,{children:a})})})]})};return function(){var e=t.visitSpreadingReducer.visibility.filter((function(e){return null!==e.file&&null!==e.type&&null!==e.brand}));return o?Object(n.jsx)(p.a,{}):Object(n.jsxs)("div",{className:d.a.container,children:[f?Object(n.jsx)(v.a,{children:Object(n.jsx)(p.a,{})}):null,Object(n.jsxs)("div",{className:d.a.wrapper,children:[Object(n.jsx)(_.a,{title:O?"New Outlet":"Spreading",color:"white",action:"Submit",onClick:function(){!function(){if(8===t.visitSpreadingReducer.visibility.filter((function(e){return null!==e.file&&null!==e.type&&null!==e.brand})).length){m(!0),q(!1);var e=JSON.parse(localStorage.getItem("user")),n={usernameSMR:e.username,nomorDokumen:"",catatan:t.visitSpreadingReducer.catatan,idJenisChannel:parseInt(t.visitSpreadingReducer.jenisChannel.jenisChannelID),jenisChannel:t.visitSpreadingReducer.jenisChannel.namaJenisChannel,idOutlet:t.visitSpreadingReducer.outlet.outletID,namaOutlet:t.visitSpreadingReducer.outlet.namaOutlet,alamatOutlet:t.visitSpreadingReducer.outlet.alamatOutlet,tanggal:E.toISOString(),target:0,sales:0,isCheckIn:!0,checkInDate:t.visitSpreadingReducer.checkIn.toISOString(),isCheckOut:!0,checkOutDate:E.toISOString(),createdBy:e.username,updatedBy:e.username},a={usernameSMR:e.username,nomorDokumen:"",catatan:t.visitSpreadingReducer.catatan,idJenisChannel:parseInt(t.visitSpreadingReducer.jenisChannel.jenisChannelID),jenisChannel:t.visitSpreadingReducer.jenisChannel.namaJenisChannel,idOutlet:"",namaOutlet:t.visitSpreadingReducer.newOutlet,alamatOutlet:t.visitSpreadingReducer.alamat,tanggal:E.toISOString(),target:0,sales:0,isCheckIn:!0,checkInDate:t.visitSpreadingReducer.checkIn.toISOString(),isCheckOut:!0,checkOutDate:E.toISOString(),createdBy:e.username,updatedBy:e.username},r=t.visitSpreadingReducer.visibility.map((function(e,t){return e.file})),s=t.visitSpreadingReducer.avability.map((function(t,i){return{nomorDokumen:"",nomor:i,kodeProduk:t.productFocus.produkID,namaProduk:t.productFocus.namaProduk,stok:parseInt(t.stock),saranOrder:parseInt(t.saranOrder),jumlahOrder:parseInt(t.order),harga:parseInt(t.harga),totalHarga:parseInt(t.harga)*parseInt(t.order),keterangan:t.ket,createdBy:e.username,updatedBy:e.username}})),l={spreadingSave:n,dProductList:s},o={spreadingSave:a,dProductList:s};console.log(l,t.visitSpreadingReducer.avability),O?t.visitSpreadingReducer.newOutlet&&t.visitSpreadingReducer.jenisChannel.namaJenisChannel&&t.visitSpreadingReducer.alamat?Object(j.G)(o).then((function(n){console.log("ini res",n);for(var a=t.visitSpreadingReducer.visibility.map((function(t,i){return{activitySpreadingId:n.spreadingSave.id,nomor:i,tipe:t.type.program,namaFile:t.file.name,createdBy:e.username,updatedBy:e.username,brandId:t.brand.id,namaBrand:t.brand.namaBrand}})),s=function(e){Object(j.H)(a[e],r[e]).then((function(t){7===e&&(m(!1),c.a.push("/"),i.setDefaultVisitSpreading())})).catch((function(e){console.log(e)}))},l=0;l<r.length;l++)s(l)})).catch((function(e){console.log(e)})):m(!1):Object(j.G)(l).then((function(n){console.log("ini res",n);for(var a=t.visitSpreadingReducer.visibility.map((function(t,i){return{activitySpreadingId:n.spreadingSave.id,nomor:i,tipe:t.type.program,namaFile:t.file.name,createdBy:e.username,updatedBy:e.username,brandId:t.brand.id,namaBrand:t.brand.namaBrand}})),s=function(e){Object(j.H)(a[e],r[e]).then((function(t){7===e&&(m(!1),c.a.push("/"),i.setDefaultVisitSpreading())})).catch((function(e){console.log(e)}))},l=0;l<r.length;l++)s(l)})).catch((function(e){console.log(e)}))}else q(!0)}()},backAction:function(){confirm("Data will be lost if you leave the page, are you sure?")&&(i.setDefaultVisitSpreading(),c.a.push("/visit/spreading"))},disable:8!==e.length}),Object(n.jsxs)("div",{className:d.a.main,children:[M?Object(n.jsx)("div",{style:{color:"red",fontSize:"13px",textAlign:"center"},children:"Please complete visibility data"}):"",Object(n.jsxs)("div",{children:[U("Jenis Channel",t.visitSpreadingReducer.jenisChannel.namaJenisChannel),U("Outlet",t.visitSpreadingReducer.outlet.namaOutlet),U("Alamat",t.visitSpreadingReducer.outlet.alamatOutlet),U("Catatan",t.visitSpreadingReducer.catatan),U("Visibility"),U("Avability")]})]})]})]})}()}},PHyJ:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/visit/spreading/submit",function(){return i("M9MU")}])},"UV+Q":function(e,t,i){"use strict";var n=i("nKUr"),a=(i("q1tI"),i("YFqc"),i("4lBl")),r=i.n(a);i("20a2");t.a=function(e){var t=e.children,i=e.onClick;return Object(n.jsx)("div",{onClick:i,className:r.a.modal,children:t})}},YFqc:function(e,t,i){e.exports=i("cTJO")},cTJO:function(e,t,i){"use strict";var n=i("J4zp"),a=i("284h");t.__esModule=!0,t.default=void 0;var r=a(i("q1tI")),s=i("elyg"),l=i("nOHt"),c=i("vNVm"),o={};function d(e,t,i,n){if(e&&(0,s.isLocalURL)(t)){e.prefetch(t,i,n).catch((function(e){0}));var a=n&&"undefined"!==typeof n.locale?n.locale:e&&e.locale;o[t+"%"+i+(a?"%"+a:"")]=!0}}var u=function(e){var t=!1!==e.prefetch,i=(0,l.useRouter)(),a=i&&i.asPath||"/",u=r.default.useMemo((function(){var t=(0,s.resolveHref)(a,e.href,!0),i=n(t,2),r=i[0],l=i[1];return{href:r,as:e.as?(0,s.resolveHref)(a,e.as):l||r}}),[a,e.href,e.as]),_=u.href,v=u.as,b=e.children,p=e.replace,h=e.shallow,j=e.scroll,g=e.locale;"string"===typeof b&&(b=r.default.createElement("a",null,b));var f=r.Children.only(b),m=f&&"object"===typeof f&&f.ref,x=(0,c.useIntersection)({rootMargin:"200px"}),O=n(x,2),y=O[0],S=O[1],w=r.default.useCallback((function(e){y(e),m&&("function"===typeof m?m(e):"object"===typeof m&&(m.current=e))}),[m,y]);(0,r.useEffect)((function(){var e=S&&t&&(0,s.isLocalURL)(_),n="undefined"!==typeof g?g:i&&i.locale,a=o[_+"%"+v+(n?"%"+n:"")];e&&!a&&d(i,_,v,{locale:n})}),[v,_,S,g,t,i]);var C={ref:w,onClick:function(e){f.props&&"function"===typeof f.props.onClick&&f.props.onClick(e),e.defaultPrevented||function(e,t,i,n,a,r,l,c){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,s.isLocalURL)(i))&&(e.preventDefault(),null==l&&(l=n.indexOf("#")<0),t[a?"replace":"push"](i,n,{shallow:r,locale:c,scroll:l}))}(e,i,_,v,p,h,j,g)},onMouseEnter:function(e){(0,s.isLocalURL)(_)&&(f.props&&"function"===typeof f.props.onMouseEnter&&f.props.onMouseEnter(e),d(i,_,v,{priority:!0}))}};if(e.passHref||"a"===f.type&&!("href"in f.props)){var k="undefined"!==typeof g?g:i&&i.locale,R=i&&i.isLocaleDomain&&(0,s.getDomainLocale)(v,k,i&&i.locales,i&&i.domainLocales);C.href=R||(0,s.addBasePath)((0,s.addLocale)(v,k,i&&i.defaultLocale))}return r.default.cloneElement(f,C)};t.default=u},dVq6:function(e,t,i){e.exports={container:"Spinner_container__3N6EY",spinner:"Spinner_spinner__3goiz","ball-spin-clockwise":"Spinner_ball-spin-clockwise__YJ_C3"}},es2X:function(e,t,i){"use strict";var n=i("nKUr"),a=(i("q1tI"),i("YFqc"),i("GKTS")),r=i.n(a);t.a=function(e){var t=e.onClick,i=e.text,a=e.submit,s=e.color;return Object(n.jsx)("button",{type:a?"submit":"",className:"white"===s?r.a.container_white:r.a.container,onClick:t,children:i})}},fj1f:function(e,t,i){"use strict";var n=i("nKUr"),a=i("dVq6"),r=i.n(a);t.a=function(){return Object(n.jsx)("div",{className:r.a.container,children:Object(n.jsxs)("div",{className:r.a.spinner,children:[Object(n.jsx)("div",{}),Object(n.jsx)("div",{}),Object(n.jsx)("div",{}),Object(n.jsx)("div",{}),Object(n.jsx)("div",{}),Object(n.jsx)("div",{}),Object(n.jsx)("div",{}),Object(n.jsx)("div",{})]})})}},mPD6:function(e,t,i){e.exports={nav_container:"Nav_nav_container__7SMgK",title:"Nav_title__21aLL",nav_green:"Nav_nav_green__1_B--",nav_white:"Nav_nav_white__1ml4-",white:"Nav_white__2liqq"}},vNVm:function(e,t,i){"use strict";var n=i("J4zp");t.__esModule=!0,t.useIntersection=function(e){var t=e.rootMargin,i=e.disabled||!s,c=(0,a.useRef)(),o=(0,a.useState)(!1),d=n(o,2),u=d[0],_=d[1],v=(0,a.useCallback)((function(e){c.current&&(c.current(),c.current=void 0),i||u||e&&e.tagName&&(c.current=function(e,t,i){var n=function(e){var t=e.rootMargin||"",i=l.get(t);if(i)return i;var n=new Map,a=new IntersectionObserver((function(e){e.forEach((function(e){var t=n.get(e.target),i=e.isIntersecting||e.intersectionRatio>0;t&&i&&t(i)}))}),e);return l.set(t,i={id:t,observer:a,elements:n}),i}(i),a=n.id,r=n.observer,s=n.elements;return s.set(e,t),r.observe(e),function(){s.delete(e),r.unobserve(e),0===s.size&&(r.disconnect(),l.delete(a))}}(e,(function(e){return e&&_(e)}),{rootMargin:t}))}),[i,t,u]);return(0,a.useEffect)((function(){if(!s&&!u){var e=(0,r.requestIdleCallback)((function(){return _(!0)}));return function(){return(0,r.cancelIdleCallback)(e)}}}),[u]),[v,u]};var a=i("q1tI"),r=i("0G5g"),s="undefined"!==typeof IntersectionObserver;var l=new Map}},[["PHyJ",0,2,1,3,4]]]);