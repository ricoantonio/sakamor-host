_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[37],{"4lBl":function(e,i,t){e.exports={modal:"Modal_modal__2IoMM"}},"5PhN":function(e,i,t){"use strict";var a=t("nKUr"),n=(t("q1tI"),t("M7ZG")),r=t.n(n);i.a=function(e){var i=e.children,t=e.style,n=e.shadow;return Object(a.jsx)("div",{className:"".concat(r.a.container," ").concat(n?r.a.shadow:""),style:t||{},children:i})}},Dfhs:function(e,i,t){e.exports={container:"VisitPlanDetail_container__2jr6z",wrapper:"VisitPlanDetail_wrapper__1k2PA",main:"VisitPlanDetail_main__2JVTk",render_data:"VisitPlanDetail_render_data__UG0Yf",avability_modal_subtitle:"VisitPlanDetail_avability_modal_subtitle__cImGw",render_value:"VisitPlanDetail_render_value__2U7Gk",input:"VisitPlanDetail_input__3EeAf",input_order_search:"VisitPlanDetail_input_order_search__3uxsM",input_order:"VisitPlanDetail_input_order__1WXcP",visibility_grid:"VisitPlanDetail_visibility_grid__eKqRB",grid_50:"VisitPlanDetail_grid_50__xScpT",visibility_grid_history:"VisitPlanDetail_visibility_grid_history__3RjRi",visibility_dropdown:"VisitPlanDetail_visibility_dropdown__1NliU",new_button:"VisitPlanDetail_new_button__3zBx9",input_file:"VisitPlanDetail_input_file__2mLHX",progress_bar:"VisitPlanDetail_progress_bar__Cz8_8",progress_bar_now:"VisitPlanDetail_progress_bar_now__3w_Ar",avability_bot_container:"VisitPlanDetail_avability_bot_container__1vyIh",avability_modal_container:"VisitPlanDetail_avability_modal_container__1BVd4",avability_modal_main:"VisitPlanDetail_avability_modal_main__isfSW",modal_avability:"VisitPlanDetail_modal_avability__3bVY8",hidden_overflow:"VisitPlanDetail_hidden_overflow__35jOV",add_title:"VisitPlanDetail_add_title__20KUY",stock_order_container:"VisitPlanDetail_stock_order_container__1-0Au",avg_sales_container:"VisitPlanDetail_avg_sales_container__2ZL8F",avabilitylist_title:"VisitPlanDetail_avabilitylist_title__3iIBI",avabilitylist_stock_container:"VisitPlanDetail_avabilitylist_stock_container__1iSbF",avabilitylist_container:"VisitPlanDetail_avabilitylist_container__WpqI9",avabilitylist_subtitle:"VisitPlanDetail_avabilitylist_subtitle__2LI2L",avabilitylist_value:"VisitPlanDetail_avabilitylist_value__21-Yx",search_fixed:"VisitPlanDetail_search_fixed__3uZmj",nav_box:"VisitPlanDetail_nav_box__2aVI9"}},GKTS:function(e,i,t){e.exports={container:"Button_container__37SWQ",container_white:"Button_container_white__zoABs"}},JkA1:function(e,i,t){"use strict";var a=t("nKUr"),n=(t("q1tI"),t("YFqc")),r=t.n(n),s=t("mPD6"),l=t.n(s);i.a=function(e){var i=e.backHref,t=e.title,n=e.action,s=e.color,c=e.onClick,d=e.backAction,o=e.noBack,u=e.disable;return Object(a.jsxs)("div",{className:"green"==s?"".concat(l.a.nav_green," ").concat(l.a.nav_container):"white"==s?"".concat(l.a.nav_white," ").concat(l.a.nav_container):l.a.nav_container,children:[i?Object(a.jsx)(r.a,{href:i||"/",children:Object(a.jsx)("a",{children:Object(a.jsx)("img",{style:{width:"24px"},src:"/arrow-left.svg"})})}):o?Object(a.jsx)("div",{}):Object(a.jsx)("img",{onClick:function(){d()},style:{width:"24px"},src:"/arrow-left.svg"}),Object(a.jsx)("div",{style:{textAlign:"center"},className:l.a.title,children:t}),n&&!1===u?Object(a.jsx)("div",{onClick:c,style:{fontSize:"14px",margin:"auto",color:"#41867A",cursor:"pointer"},children:n}):n&&!0===u?Object(a.jsx)("div",{onClick:c,style:{fontSize:"14px",margin:"auto",color:"#c4c4c4",cursor:"pointer"},children:n}):null]})}},M7ZG:function(e,i,t){e.exports={container:"Card_container__2ez1c",shadow:"Card_shadow__Tq5_x"}},M9MU:function(e,i,t){"use strict";t.r(i),t.d(i,"default",(function(){return g}));var a=t("nKUr"),n=t("q1tI"),r=t("YFqc"),s=t.n(r),l=t("20a2"),c=t.n(l),d=t("Dfhs"),o=t.n(d),u=t("kQFM"),_=t("JkA1"),b=t("UV+Q"),v=t("5PhN"),j=t("fj1f"),h=t("es2X"),p=t("ECGM");function g(){var e=Object(n.useContext)(u.b),i=e.state,t=(e.dispatch,e.actions),r=Object(n.useState)(!1),d=r[0],g=(r[1],Object(n.useState)(!1)),m=g[0],x=g[1],O=Object(n.useState)(!1),y=O[0],f=O[1],S=Object(n.useState)([]),w=(S[0],S[1],Object(n.useState)("")),C=w[0],k=w[1],R=Object(n.useState)([]),V=R[0],D=R[1],P=Object(n.useState)(!1),I=P[0],N=P[1],A=Object(n.useState)({}),B=(A[0],A[1]),J=Object(n.useState)(!1),q=J[0],F=J[1],M=Object(l.useRouter)(),T=new Date;Object(n.useEffect)((function(){M.query.new?(f(!0),i.visitSpreadingReducer.checkIn||t.setSpreadingCheckIn(T),k(i.visitSpreadingReducer.jenisChannel.namaJenisChannel),i.visitSpreadingReducer.jenisChannel.namaJenisChannel&&i.visitSpreadingReducer.outlet.namaOutlet&&k(i.visitSpreadingReducer.jenisChannel.namaJenisChannel)):i.visitSpreadingReducer.jenisChannel.namaJenisChannel&&i.visitSpreadingReducer.outlet.namaOutlet?(i.visitSpreadingReducer.checkIn||t.setSpreadingCheckIn(T),k(i.visitSpreadingReducer.jenisChannel.namaJenisChannel)):c.a.push("/visit/spreading")}),[]);var U=function(e){N(!0),k(e),e?Object(p.q)(e).then((function(e){D(e)})).catch((function(e){console.log(e)})):D([])},z=function(e,n){var r=i.visitSpreadingReducer.visibility.filter((function(e){return null!==e.file&&null!==e.type&&null!==e.brand})),l=i.visitSpreadingReducer.avability;return y?Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:o.a.render_data,children:[e,Object(a.jsx)("div",{style:{textAlign:"right"},children:"Visibility"===e?"".concat(r.length,"/8"):"Avability"===e?"".concat(l.length,"/25"):""})]}),"Jenis Channel"===e?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{onChange:function(e){U(e.target.value),t.setSpreadingAvability([])},value:C,placeholder:"Search",className:o.a.input,onBlur:function(){setTimeout((function(){N(!1)}),200)},onFocus:function(e){return U(e.target.value)}}),I?Object(a.jsx)("div",{style:{position:"absolute",maxHeight:"180px",backgroundColor:"white",overflowY:"scroll",maxWidth:"400px",padding:"0 4px",zIndex:999999,marginTop:"-10px"},children:V.map((function(e,i){return Object(a.jsx)("div",{onClick:function(){B(e),t.setSpreadingJenisChannel(e),k(e.namaJenisChannel),D([])},style:{borderBottom:".5px solid #f0f0f0",width:"350px"},children:e.namaJenisChannel},i)}))}):null]}):"Outlet"===e?Object(a.jsx)(v.a,{style:{marginTop:"6px",borderRadius:"5px"},children:Object(a.jsx)("div",{className:o.a.render_value,children:Object(a.jsx)("textarea",{style:{width:"100%",border:"none",height:"20px"},onChange:function(e){t.setSpreadingNewOutlet(e.target.value)},value:i.visitSpreadingReducer.newOutlet})})}):"Alamat"===e?Object(a.jsx)(v.a,{style:{marginTop:"6px",borderRadius:"5px"},children:Object(a.jsx)("div",{className:o.a.render_value,children:Object(a.jsx)("textarea",{style:{width:"100%",border:"none",height:"70px"},onChange:function(e){t.setSpreadingAlamat(e.target.value)},value:i.visitSpreadingReducer.alamat})})}):"Catatan"===e?Object(a.jsx)(v.a,{style:{marginTop:"6px",borderRadius:"5px"},children:Object(a.jsx)("div",{className:o.a.render_value,children:Object(a.jsx)("textarea",{style:{width:"100%",border:"none",height:"70px"},onChange:function(e){t.setSpreadingCatatan(e.target.value)},value:i.visitSpreadingReducer.catatan})})}):"Visibility"===e||"Avability"===e?Object(a.jsx)(v.a,{style:{marginTop:"6px",borderRadius:"5px"},children:Object(a.jsxs)("div",{className:o.a.render_value,children:[Object(a.jsx)("div",{children:"Visibility"===e?Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:o.a.progress_bar}),Object(a.jsx)("div",{className:o.a.progress_bar_now,style:{width:"".concat(r.length/8*100,"%")}})]}):"Avability"===e?Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:o.a.progress_bar}),Object(a.jsx)("div",{className:o.a.progress_bar_now,style:{width:"".concat(l.length/25*100,"%")}})]}):""}),"Avability"===e?i.visitSpreadingReducer.jenisChannel.namaJenisChannel?Object(a.jsx)(s.a,{href:"/visit/spreading/submit/avability?new=true",children:Object(a.jsx)("a",{children:Object(a.jsx)(h.a,{text:"Add"})})}):Object(a.jsx)(h.a,{text:"Add"}):"Visibility"===e?Object(a.jsx)(s.a,{href:"/visit/spreading/submit/visibility?new=true",children:Object(a.jsx)("a",{children:Object(a.jsx)(h.a,{text:"Add"})})}):null]})}):Object(a.jsx)(v.a,{style:{marginTop:"6px",borderRadius:"5px"},children:Object(a.jsx)("div",{className:o.a.render_value,children:Object(a.jsx)(a.Fragment,{children:n})})})]}):Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:o.a.render_data,children:[e,Object(a.jsx)("div",{style:{textAlign:"right"},children:"Visibility"===e?"".concat(r.length,"/8"):"Avability"===e?"".concat(l.length,"/25"):""})]}),Object(a.jsx)(v.a,{style:{marginTop:"6px",borderRadius:"5px"},children:Object(a.jsx)("div",{className:o.a.render_value,children:"Catatan"===e?Object(a.jsx)("textarea",{style:{width:"100%",border:"none",height:"70px"},onChange:function(e){t.setSpreadingCatatan(e.target.value)},value:i.visitSpreadingReducer.catatan}):"Visibility"===e||"Avability"===e?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{children:"Visibility"===e?Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:o.a.progress_bar}),Object(a.jsx)("div",{className:o.a.progress_bar_now,style:{width:"".concat(r.length/8*100,"%")}})]}):"Avability"===e?Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:o.a.progress_bar}),Object(a.jsx)("div",{className:o.a.progress_bar_now,style:{width:"".concat(l.length/25*100,"%")}})]}):""}),Object(a.jsx)(s.a,{href:"Visibility"===e?"/visit/spreading/submit/visibility":"Avability"===e?"/visit/spreading/submit/avability":"",children:Object(a.jsx)("a",{children:Object(a.jsx)(h.a,{text:"Add"})})})]}):Object(a.jsx)(a.Fragment,{children:n})})})]})};return function(){var e=i.visitSpreadingReducer.visibility.filter((function(e){return null!==e.file&&null!==e.type&&null!==e.brand}));return d?Object(a.jsx)(j.a,{}):Object(a.jsxs)("div",{className:o.a.container,children:[m?Object(a.jsx)(b.a,{children:Object(a.jsx)(j.a,{})}):null,Object(a.jsxs)("div",{className:o.a.wrapper,children:[Object(a.jsx)(_.a,{title:y?"New Outlet":"Spreading",color:"white",action:"Submit",onClick:function(){!function(){if(8===i.visitSpreadingReducer.visibility.filter((function(e){return null!==e.file&&null!==e.type&&null!==e.brand})).length){x(!0),F(!1);var e=JSON.parse(localStorage.getItem("user")),a={usernameSMR:e.username,nomorDokumen:"",catatan:i.visitSpreadingReducer.catatan,idJenisChannel:parseInt(i.visitSpreadingReducer.jenisChannel.jenisChannelID),jenisChannel:i.visitSpreadingReducer.jenisChannel.namaJenisChannel,idOutlet:i.visitSpreadingReducer.outlet.outletID,namaOutlet:i.visitSpreadingReducer.outlet.namaOutlet,alamatOutlet:i.visitSpreadingReducer.outlet.alamatOutlet,tanggal:T.toISOString(),target:0,sales:0,isCheckIn:!0,checkInDate:i.visitSpreadingReducer.checkIn.toISOString(),isCheckOut:!0,checkOutDate:T.toISOString(),createdBy:e.username,updatedBy:e.username},n={usernameSMR:e.username,nomorDokumen:"",catatan:i.visitSpreadingReducer.catatan,idJenisChannel:parseInt(i.visitSpreadingReducer.jenisChannel.jenisChannelID),jenisChannel:i.visitSpreadingReducer.jenisChannel.namaJenisChannel,idOutlet:"",namaOutlet:i.visitSpreadingReducer.newOutlet,alamatOutlet:i.visitSpreadingReducer.alamat,tanggal:T.toISOString(),target:0,sales:0,isCheckIn:!0,checkInDate:i.visitSpreadingReducer.checkIn.toISOString(),isCheckOut:!0,checkOutDate:T.toISOString(),createdBy:e.username,updatedBy:e.username},r=i.visitSpreadingReducer.visibility.map((function(e,i){return e.file})),s=i.visitSpreadingReducer.avability.map((function(i,t){return{nomorDokumen:"",nomor:t,kodeProduk:i.productFocus.produkID,namaProduk:i.productFocus.namaProduk,stok:parseInt(i.stock),saranOrder:parseInt(i.saranOrder),jumlahOrder:parseInt(i.order),harga:parseInt(i.harga),totalHarga:parseInt(i.harga)*parseInt(i.order),keterangan:i.ket,createdBy:e.username,updatedBy:e.username}})),l={spreadingSave:a,dProductList:s},d={spreadingSave:n,dProductList:s};console.log(l,i.visitSpreadingReducer.avability),y?i.visitSpreadingReducer.newOutlet&&i.visitSpreadingReducer.jenisChannel.namaJenisChannel&&i.visitSpreadingReducer.alamat?Object(p.y)(d).then((function(a){console.log("ini res",a);for(var n=i.visitSpreadingReducer.visibility.map((function(i,t){return{activitySpreadingId:a.spreadingSave.id,nomor:t,tipe:i.type.program,namaFile:i.file.name,createdBy:e.username,updatedBy:e.username,brandId:i.brand.id,namaBrand:i.brand.namaBrand}})),s=function(e){Object(p.z)(n[e],r[e]).then((function(i){7===e&&(x(!1),c.a.push("/"),t.setDefaultVisitSpreading())})).catch((function(e){console.log(e)}))},l=0;l<r.length;l++)s(l)})).catch((function(e){console.log(e)})):x(!1):Object(p.y)(l).then((function(a){console.log("ini res",a);for(var n=i.visitSpreadingReducer.visibility.map((function(i,t){return{activitySpreadingId:a.spreadingSave.id,nomor:t,tipe:i.type.program,namaFile:i.file.name,createdBy:e.username,updatedBy:e.username,brandId:i.brand.id,namaBrand:i.brand.namaBrand}})),s=function(e){Object(p.z)(n[e],r[e]).then((function(i){7===e&&(x(!1),c.a.push("/"),t.setDefaultVisitSpreading())})).catch((function(e){console.log(e)}))},l=0;l<r.length;l++)s(l)})).catch((function(e){console.log(e)}))}else F(!0)}()},backAction:function(){confirm("Data will be lost if you leave the page, are you sure?")&&(t.setDefaultVisitSpreading(),c.a.push("/visit/spreading"))},disable:8!==e.length}),Object(a.jsxs)("div",{className:o.a.main,children:[q?Object(a.jsx)("div",{style:{color:"red",fontSize:"13px",textAlign:"center"},children:"Please complete visibility data"}):"",Object(a.jsxs)("div",{children:[z("Jenis Channel",i.visitSpreadingReducer.jenisChannel.namaJenisChannel),z("Outlet",i.visitSpreadingReducer.outlet.namaOutlet),z("Alamat",i.visitSpreadingReducer.outlet.alamatOutlet),z("Catatan",i.visitSpreadingReducer.catatan),z("Visibility"),z("Avability")]})]})]})]})}()}},PHyJ:function(e,i,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/visit/spreading/submit",function(){return t("M9MU")}])},"UV+Q":function(e,i,t){"use strict";var a=t("nKUr"),n=(t("q1tI"),t("YFqc"),t("4lBl")),r=t.n(n);t("20a2");i.a=function(e){var i=e.children,t=e.onClick;return Object(a.jsx)("div",{onClick:t,className:r.a.modal,children:i})}},dVq6:function(e,i,t){e.exports={container:"Spinner_container__3N6EY",spinner:"Spinner_spinner__3goiz","ball-spin-clockwise":"Spinner_ball-spin-clockwise__YJ_C3"}},es2X:function(e,i,t){"use strict";var a=t("nKUr"),n=(t("q1tI"),t("YFqc"),t("GKTS")),r=t.n(n);i.a=function(e){var i=e.onClick,t=e.text,n=e.submit,s=e.color;return Object(a.jsx)("button",{type:n?"submit":"",className:"white"===s?r.a.container_white:r.a.container,onClick:i,children:t})}},fj1f:function(e,i,t){"use strict";var a=t("nKUr"),n=t("dVq6"),r=t.n(n);i.a=function(){return Object(a.jsx)("div",{className:r.a.container,children:Object(a.jsxs)("div",{className:r.a.spinner,children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{})]})})}},mPD6:function(e,i,t){e.exports={nav_container:"Nav_nav_container__7SMgK",title:"Nav_title__21aLL",nav_green:"Nav_nav_green__1_B--",nav_white:"Nav_nav_white__1ml4-",white:"Nav_white__2liqq"}}},[["PHyJ",0,2,1,4,3]]]);