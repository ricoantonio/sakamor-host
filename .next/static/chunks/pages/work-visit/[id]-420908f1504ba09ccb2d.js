_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[54],{"29p6":function(t,n,e){t.exports={container:"WorkVisitDetail_container__1XrY3",wrapper:"WorkVisitDetail_wrapper__24vWh",main:"WorkVisitDetail_main__1UDRz",produk_fokus_container:"WorkVisitDetail_produk_fokus_container__2VgVG",rayon_container:"WorkVisitDetail_rayon_container__2yuFk",data_container:"WorkVisitDetail_data_container__11hnF",bottom_container:"WorkVisitDetail_bottom_container__3GRy7",nilai_container:"WorkVisitDetail_nilai_container__2ugbs",penilaian_top_container:"WorkVisitDetail_penilaian_top_container__1DdcU",penilaian_bot_container:"WorkVisitDetail_penilaian_bot_container__3JlnR"}},"4lBl":function(t,n,e){t.exports={modal:"Modal_modal__2IoMM"}},"5PhN":function(t,n,e){"use strict";var a=e("nKUr"),i=(e("q1tI"),e("M7ZG")),r=e.n(i);n.a=function(t){var n=t.children,e=t.style,i=t.shadow;return Object(a.jsx)("div",{className:"".concat(r.a.container," ").concat(i?r.a.shadow:""),style:e||{},children:n})}},GKTS:function(t,n,e){t.exports={container:"Button_container__37SWQ",container_white:"Button_container_white__zoABs"}},JFGI:function(t,n,e){t.exports={container:"Dropdown_container__3dbP-"}},JkA1:function(t,n,e){"use strict";var a=e("nKUr"),i=(e("q1tI"),e("YFqc")),r=e.n(i),c=e("mPD6"),o=e.n(c);n.a=function(t){var n=t.backHref,e=t.title,i=t.action,c=t.color,s=t.onClick,l=t.backAction,u=t.noBack,d=t.disable;return Object(a.jsxs)("div",{className:"green"==c?"".concat(o.a.nav_green," ").concat(o.a.nav_container):"white"==c?"".concat(o.a.nav_white," ").concat(o.a.nav_container):o.a.nav_container,children:[n?Object(a.jsx)(r.a,{href:n||"/",children:Object(a.jsx)("a",{children:Object(a.jsx)("img",{style:{width:"24px"},src:"/arrow-left.svg"})})}):u?Object(a.jsx)("div",{}):Object(a.jsx)("img",{onClick:function(){l()},style:{width:"24px"},src:"/arrow-left.svg"}),Object(a.jsx)("div",{style:{textAlign:"center"},className:o.a.title,children:e}),i&&!1===d?Object(a.jsx)("div",{onClick:s,style:{fontSize:"14px",margin:"auto",color:"#41867A",cursor:"pointer"},children:i}):i&&!0===d?Object(a.jsx)("div",{onClick:s,style:{fontSize:"14px",margin:"auto",color:"#c4c4c4",cursor:"pointer"},children:i}):null]})}},KQm4:function(t,n,e){"use strict";function a(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,a=new Array(n);e<n;e++)a[e]=t[e];return a}function i(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(t){if("string"===typeof t)return a(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}e.d(n,"a",(function(){return i}))},M7ZG:function(t,n,e){t.exports={container:"Card_container__2ez1c",shadow:"Card_shadow__Tq5_x"}},"UV+Q":function(t,n,e){"use strict";var a=e("nKUr"),i=(e("q1tI"),e("YFqc"),e("4lBl")),r=e.n(i);e("20a2");n.a=function(t){var n=t.children,e=t.onClick;return Object(a.jsx)("div",{onClick:e,className:r.a.modal,children:n})}},Yue9:function(t,n,e){"use strict";var a=e("nKUr"),i=e("KQm4"),r=(e("q1tI"),e("JFGI")),c=e.n(r);n.a=function(t){var n=t.options,e=void 0===n?[]:n,r=t.onChange,o=t.value,s=t.type;if("POSM"===s)var l=o?{program:o,value:o}:{program:"SELECT TYPE",value:{}};else if("BRAND"===s)l=o?{namaBrand:o,value:o}:{namaBrand:"SELECT BRAND",value:{}};return Object(a.jsx)("select",{className:c.a.container,onChange:function(t){return r(t)},children:[l].concat(Object(i.a)(e)).map((function(t,n){return t&&Object(a.jsx)("option",{value:t.value,children:"POSM"==s?t.program:"BRAND"===s?t.namaBrand:"NILAI_WORKVISIT"===s?t:""},n)}))})}},bGjZ:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/work-visit/[id]",function(){return e("dadD")}])},dVq6:function(t,n,e){t.exports={container:"Spinner_container__3N6EY",spinner:"Spinner_spinner__3goiz","ball-spin-clockwise":"Spinner_ball-spin-clockwise__YJ_C3"}},dadD:function(t,n,e){"use strict";e.r(n),e.d(n,"default",(function(){return m}));var a=e("nKUr"),i=e("rePB"),r=e("q1tI"),c=(e("YFqc"),e("20a2")),o=e.n(c),s=e("29p6"),l=e.n(s),u=e("kQFM"),d=e("JkA1"),j=e("5PhN"),_=e("fj1f"),b=e("es2X"),p=e("UV+Q"),f=e("Yue9"),v=e("ECGM");function O(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,a)}return e}function h(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?O(Object(e),!0).forEach((function(n){Object(i.a)(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):O(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function m(){var t=Object(r.useContext)(u.b),n=(t.state,t.dispatch),e=t.actions,i=Object(r.useState)(!0),s=i[0],O=i[1],m=Object(r.useState)([]),x=m[0],k=m[1],g=Object(r.useState)([]),y=g[0],w=g[1],S=Object(r.useState)(!0),N=S[0],D=S[1],P=Object(r.useState)(!1),V=P[0],I=P[1],C=Object(c.useRouter)(),A=new Date;Object(r.useEffect)((function(){if(C.query.id){var t=JSON.parse(localStorage.getItem("user"));Object(v.a)(t).then((function(t){var n=t.filter((function(t){return t.idMasterPlan===C.query.id}));k(n),O(!1)})).catch((function(t){console.log(t)}))}}),[C.query.id]),Object(r.useEffect)((function(){Object(v.l)().then((function(t){w(t),D(!1)})).catch((function(t){console.log(t)}))}),[n]);var W=function(){var t=x[0];if(t)return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(j.a,{style:{borderRadius:"5px",padding:"16px"},shadow:!0,children:[Object(a.jsxs)("div",{className:l.a.data_container,children:[Object(a.jsx)("div",{children:t.namaSMR}),Object(a.jsx)("div",{style:{textAlign:"right"},children:Object(a.jsx)("span",{className:l.a.rayon_container,children:t.kodeRayon})})]}),Object(a.jsxs)("div",{style:{fontSize:"12px",fontWeight:"400"},children:["Produk Fokus:"," ",Object(a.jsx)("span",{className:l.a.produk_fokus_container,children:t.produkFokus})]})]}),y.map((function(t,n){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:l.a.penilaian_top_container,children:t.namaKonten}),Object(a.jsxs)("div",{className:l.a.penilaian_bot_container,children:[Object(a.jsxs)("div",{className:l.a.nilai_container,children:[Object(a.jsx)("div",{children:"Nilai"}),Object(a.jsx)(f.a,{options:["SELECT",1,2,3,4,5],type:"NILAI_WORKVISIT",onChange:function(t){y.splice(n,1,h(h({},y[n]),{},{nilai:parseInt(t.target.value)}))}})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Catatan"}),Object(a.jsx)("textarea",{style:{width:"100%",height:"80px",fontSize:"12px",border:"1px solid #e9ecf2",borderRadius:"5px"},onChange:function(t){y.splice(n,1,h(h({},y[n]),{},{catatan:t.target.value}))}})]})]})]})}))]})};return s||N?Object(a.jsx)(_.a,{}):Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:l.a.container,children:[V?Object(a.jsx)(p.a,{children:Object(a.jsx)(_.a,{})}):null,Object(a.jsxs)("div",{className:l.a.wrapper,children:[Object(a.jsx)(d.a,{title:"Work Visit",color:"white",action:"Submit",backAction:function(){confirm("Data will be lost if you leave the page, are you sure?")&&(e.setDefaultVisitUnplan(),o.a.push("/work-visit"))}}),Object(a.jsx)("div",{className:l.a.main,children:W()}),Object(a.jsx)("div",{className:l.a.bottom_container,children:Object(a.jsx)(b.a,{onClick:function(){!function(){if(y.filter((function(t){return t.nilai})).length===y.length){I(!0);var t=JSON.parse(localStorage.getItem("user")),n=x[0],e=y.map((function(e){return{id:e.id,idActivityWorkVisit:n.idWorkVisit,idMasterKontenWorkVisit:e.id,rating:e.nilai,catatan:e.catatan?e.catatan:"",createdby:t.username,updatedBy:t.username,namaKonten:e.namaKonten}})),a={workVisit:{id:n.idWorkVisit,idMasterPlanWorkVisit:n.idMasterPlan,namaSMR:n.namaSMR,usernameSMR:n.usernameSMR,kodeRayon:n.kodeRayon,rayon:n.rayon,kodeProduk:n.kodeProduk,produkFokus:n.produkFokus,isPenilaian:!0,tanggalPenilaian:A.toISOString(),createdBy:t.username,updatedBy:t.username},rating:e}}Object(v.J)(a).then((function(t){I(!1),o.a.push("/")})).catch((function(t){console.log(t)}))}()},text:"Submit"})})]})]})})}},es2X:function(t,n,e){"use strict";var a=e("nKUr"),i=(e("q1tI"),e("YFqc"),e("GKTS")),r=e.n(i);n.a=function(t){var n=t.onClick,e=t.text,i=t.submit,c=t.color;return Object(a.jsx)("button",{type:i?"submit":"",className:"white"===c?r.a.container_white:r.a.container,onClick:n,children:e})}},fj1f:function(t,n,e){"use strict";var a=e("nKUr"),i=e("dVq6"),r=e.n(i);n.a=function(){return Object(a.jsx)("div",{className:r.a.container,children:Object(a.jsxs)("div",{className:r.a.spinner,children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{})]})})}},mPD6:function(t,n,e){t.exports={nav_container:"Nav_nav_container__7SMgK",title:"Nav_title__21aLL",nav_green:"Nav_nav_green__1_B--",nav_white:"Nav_nav_white__1ml4-",white:"Nav_white__2liqq"}}},[["bGjZ",0,2,1,3,4]]]);