{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport Link from \"next/link\";\nimport Router, { useRouter } from \"next/router\";\nimport styles from \"../../../../styles/pages/WorkVisitDetail.module.css\";\nimport { Stores } from \"../../../../store\";\nimport Nav from \"../../../../components/Nav\";\nimport Card from \"../../../../components/Card\";\nimport Spinner from \"../../../../components/Spinner\";\nimport Button from \"../../../../components/Button\";\nimport Modal from \"../../../../components/Modal\";\nimport Dropdown from \"../../../../components/Dropdown\";\nimport { getAllWorkVisit, getKontenWorkVisit, getWorkVisitMonthlyHistory, getWorkVisitRating, submitWorkVisit } from \"../../../../helper\";\nexport default function index() {\n  const {\n    state,\n    dispatch,\n    actions\n  } = useContext(Stores);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const {\n    0: workVisit,\n    1: setWorkVisit\n  } = useState([]);\n  const {\n    0: konten,\n    1: setKonten\n  } = useState([]);\n  const {\n    0: loadingKonten,\n    1: setLoadingKonten\n  } = useState(true);\n  const {\n    0: loadingSubmit,\n    1: setLoadingSubmit\n  } = useState(false);\n  const router = useRouter();\n  var now = new Date();\n  useEffect(() => {\n    if (router.query.id) {\n      const userData = JSON.parse(localStorage.getItem(\"user\"));\n      getWorkVisitMonthlyHistory(userData).then(res => {\n        console.log(res);\n        var result = res.filter(val => {\n          return val.idWorkVisit === router.query.id;\n        });\n        setWorkVisit(result);\n        console.log(result);\n        setLoading(false);\n      }).catch(err => {\n        console.log(err);\n      });\n      getWorkVisitRating(router.query.id).then(res => {\n        // console.log(res);\n        setKonten(res);\n        console.log(res);\n        setLoadingKonten(false);\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }, [router.query.id]);\n\n  const renderPenilaian = () => {\n    const res = konten.map((val, index) => {\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: styles.penilaian_top_container,\n          children: val.namaKonten\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.penilaian_bot_container,\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: styles.nilai_container,\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              children: \"Nilai\"\n            }), /*#__PURE__*/_jsx(\"div\", {\n              children: val.rating\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              children: \"Catatan\"\n            }), /*#__PURE__*/_jsx(\"textarea\", {\n              disabled: true,\n              style: {\n                width: \"100%\",\n                height: \"80px\",\n                fontSize: \"12px\",\n                border: \"1px solid #e9ecf2\",\n                borderRadius: \"5px\"\n              },\n              value: val.catatan\n            })]\n          })]\n        })]\n      });\n    });\n    return res;\n  };\n\n  const renderDetail = () => {\n    var data = workVisit[0];\n    console.log(data);\n\n    if (data) {\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsxs(Card, {\n          style: {\n            borderRadius: \"5px\",\n            padding: \"16px\"\n          },\n          shadow: true,\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: styles.data_container,\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              children: data.namaSMR\n            }), /*#__PURE__*/_jsx(\"div\", {\n              style: {\n                textAlign: \"right\"\n              },\n              children: /*#__PURE__*/_jsx(\"span\", {\n                className: styles.rayon_container,\n                children: data.kodeRayon\n              })\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            style: {\n              fontSize: \"12px\",\n              fontWeight: \"400\"\n            },\n            children: [\"Produk Fokus:\", \" \", /*#__PURE__*/_jsx(\"span\", {\n              className: styles.produk_fokus_container,\n              children: data.produkFokus\n            })]\n          })]\n        }), renderPenilaian()]\n      });\n    }\n  };\n\n  const render = () => {\n    if (loading || loadingKonten) {\n      return /*#__PURE__*/_jsx(Spinner, {});\n    } else {\n      return /*#__PURE__*/_jsx(_Fragment, {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: styles.container,\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.wrapper,\n            children: [/*#__PURE__*/_jsx(Nav, {\n              title: \"Work Visit\",\n              color: \"white\",\n              action: \"Submit\",\n              backAction: () => {\n                Router.push(\"/work-visit/history\");\n              }\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.main,\n              children: renderDetail()\n            })]\n          })\n        })\n      });\n    }\n  };\n\n  return render();\n}","map":null,"metadata":{},"sourceType":"module"}