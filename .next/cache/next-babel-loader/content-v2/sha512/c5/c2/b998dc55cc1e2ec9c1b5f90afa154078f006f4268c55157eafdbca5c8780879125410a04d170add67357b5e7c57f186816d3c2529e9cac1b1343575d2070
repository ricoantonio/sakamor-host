{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport styles from \"../../styles/pages/Reward.module.css\";\nimport Link from \"next/link\";\nimport { Stores } from \"../../store\";\nimport { getAllAnnouncement, getIncentiveYearly, getKpiInventiveMonthlySMR } from \"../../helper\";\nimport moment from \"moment\";\nimport BotNav from \"../../components/BotNav\";\nimport Nav from \"../../components/Nav\";\nimport Card from \"../../components/Card\";\nimport { Line } from \"react-chartjs-2\";\nimport Spinner from \"../../components/Spinner\";\nimport TabelLastDataIncentive from \"../../components/TableLastDataIncentive\";\nexport default function Announcement() {\n  var _useContext = useContext(Stores),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch,\n      actions = _useContext.actions;\n\n  var _useState = useState([]),\n      dataKpi = _useState[0],\n      setDataKpi = _useState[1];\n\n  var _useState2 = useState(true),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState([]),\n      dataGraph = _useState3[0],\n      setDataGraph = _useState3[1];\n\n  var _useState4 = useState(new Date()),\n      now = _useState4[0],\n      setNow = _useState4[1];\n\n  var data = {\n    labels: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"June\", \"July\", \"Aug\", \"Sept\", \"Oct\", \"Nov\", \"Dec\"],\n    datasets: [{\n      label: \"Last Data Insentive\",\n      data: dataGraph,\n      fill: false,\n      backgroundColor: \"rgb(65, 134, 122)\",\n      borderColor: \"rgba(65, 134, 122, 0.2)\"\n    }]\n  };\n  var options = {\n    scales: {\n      yAxes: [{\n        ticks: {\n          // beginAtZero: true,\n          callback: function callback(label, index, labels) {\n            return Math.round(label / 100000 * 10) / 100 + \" k\";\n          }\n        }\n      }]\n    },\n    tooltips: {\n      enabled: false\n    },\n    hover: {\n      mode: null\n    }\n  };\n  useEffect(function () {\n    var userData = JSON.parse(localStorage.getItem(\"user\"));\n    getKpiInventiveMonthlySMR(userData, now).then(function (dataKpi) {\n      setDataKpi(dataKpi);\n      getIncentiveYearly(userData).then(function (data) {\n        data.sort(function (a, b) {\n          return a.bulan - b.bulan;\n        });\n        var yearlyIncentive = data.map(function (val) {\n          return val.totalInsentif;\n        });\n        setDataGraph(yearlyIncentive);\n        setLoading(false);\n      })[\"catch\"](function (err) {\n        console.log(err);\n      });\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  }, [dispatch, now]);\n\n  var total = function total() {\n    var totalIncentive = 0;\n    dataKpi.map(function (val) {\n      var splitGroup = val.grup.split(\".\");\n\n      if (splitGroup[1] == 0) {\n        totalIncentive += val.insentif;\n      }\n    });\n    return totalIncentive;\n  };\n\n  if (loading) {\n    return /*#__PURE__*/_jsx(Spinner, {});\n  } else {\n    return /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: styles.wrapper,\n        children: [/*#__PURE__*/_jsx(Nav, {\n          title: \"Reward\",\n          color: \"white\",\n          noBack: true\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.main,\n          children: [/*#__PURE__*/_jsx(Card, {\n            style: {\n              borderRadius: \"6px\",\n              marginTop: \"20px\"\n            },\n            children: /*#__PURE__*/_jsx(Link, {\n              href: \"/reward/benefits\",\n              children: /*#__PURE__*/_jsx(\"a\", {\n                style: {\n                  textDecoration: \"none\"\n                },\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: styles.reward_grid2,\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: styles.add_reward,\n                    children: /*#__PURE__*/_jsx(\"div\", {\n                      style: {\n                        marginTop: \"-11px\"\n                      },\n                      children: /*#__PURE__*/_jsx(\"img\", {\n                        src: \"/alert-circle.svg\"\n                      })\n                    })\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    style: {\n                      fontSize: \"16px\",\n                      fontWeight: \"600\",\n                      color: \"#FEB800\"\n                    },\n                    children: [\"Benefits\", /*#__PURE__*/_jsx(\"div\", {\n                      style: {\n                        color: \"#B9B9C3\",\n                        fontWeight: \"300\",\n                        fontSize: \"13px\"\n                      },\n                      children: \"See you benefits here\"\n                    }), \" \"]\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    style: {\n                      textAlign: \"center\"\n                    },\n                    children: /*#__PURE__*/_jsx(\"img\", {\n                      src: \"/next.svg\"\n                    })\n                  })]\n                })\n              })\n            })\n          }), /*#__PURE__*/_jsx(Card, {\n            style: {\n              borderRadius: \"6px\",\n              marginTop: \"20px\"\n            },\n            children: /*#__PURE__*/_jsx(Line, {\n              data: data,\n              options: options\n            })\n          }), /*#__PURE__*/_jsxs(Card, {\n            style: {\n              borderRadius: \"6px\",\n              marginTop: \"20px\",\n              padding: \"15px\",\n              color: \"#5E5873\"\n            },\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                children: [/*#__PURE__*/_jsx(\"span\", {\n                  style: {\n                    marginRight: \"5px\"\n                  },\n                  onClick: function onClick() {\n                    if (moment(now).format(\"MMMM YYYY\") !== moment().subtract(1, \"years\").format(\"MMMM YYYY\")) {\n                      setNow(moment(now).subtract(1, \"months\"));\n                    }\n                  },\n                  children: moment(now).format(\"MMMM YYYY\") !== moment().subtract(1, \"years\").format(\"MMMM YYYY\") ? /*#__PURE__*/_jsx(\"img\", {\n                    src: \"/cev_left.svg\"\n                  }) : /*#__PURE__*/_jsx(\"img\", {\n                    style: {\n                      height: \"20px\"\n                    },\n                    src: \"/chev_left_gray.svg\"\n                  })\n                }), /*#__PURE__*/_jsx(\"span\", {\n                  children: moment(now).format(\"MMMM YYYY\")\n                }), /*#__PURE__*/_jsx(\"span\", {\n                  style: {\n                    marginLeft: \"5px\"\n                  },\n                  onClick: function onClick() {\n                    if (moment().format(\"MMMM YYYY\") !== moment(now).format(\"MMMM YYYY\")) {\n                      setNow(moment(now).add(1, \"months\"));\n                    }\n                  },\n                  children: moment().format(\"MMMM YYYY\") !== moment(now).format(\"MMMM YYYY\") ? /*#__PURE__*/_jsx(\"img\", {\n                    src: \"/next.svg\"\n                  }) : /*#__PURE__*/_jsx(\"img\", {\n                    style: {\n                      height: \"20px\"\n                    },\n                    src: \"/chev_right_gray.svg\"\n                  })\n                })]\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              style: {\n                fontSize: \"24px\",\n                fontWeight: \"700\",\n                color: \"#41867a\"\n              },\n              children: dataKpi ? \"\".concat(total().toLocaleString(\"id-ID\"), \" IDR\") : /*#__PURE__*/_jsx(\"div\", {\n                children: \"No data\"\n              })\n            })]\n          }), /*#__PURE__*/_jsxs(Card, {\n            style: {\n              borderRadius: \"6px\",\n              marginTop: \"20px\",\n              padding: \"15px\",\n              color: \"#5E5873\"\n            },\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              style: {\n                fontWeight: \"700\"\n              },\n              children: [\"KPI Incentive Monthly ( \", moment(now).format(\"MMMM YYYY\"), \" )\"]\n            }), dataKpi ? /*#__PURE__*/_jsx(TabelLastDataIncentive, {\n              data: dataKpi\n            }) : /*#__PURE__*/_jsx(\"div\", {\n              children: \"No Data\"\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            style: {\n              marginBottom: \"120px\"\n            }\n          })]\n        })]\n      }), /*#__PURE__*/_jsx(BotNav, {})]\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module"}