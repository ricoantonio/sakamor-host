{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport Link from \"next/link\";\nimport Router from \"next/router\";\nimport { Stores } from \"../../../store\";\nimport styles from \"../../../styles/pages/Spreading.module.css\";\nimport Nav from \"../../../components/Nav\";\nimport Spinner from \"../../../components/Spinner\";\nimport Button from \"../../../components/Button\";\nimport Card from \"../../../components/Card\";\nimport { getSearchJenisChannel, getSearchOutlet } from \"../../../helper\";\nexport default function Spreading() {\n  var _useContext = useContext(Stores),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch,\n      actions = _useContext.actions;\n\n  var _useState = useState([]),\n      plan = _useState[0],\n      setPlan = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      searchJenisChannel = _useState2[0],\n      setSearchJenisChannel = _useState2[1];\n\n  var _useState3 = useState([]),\n      listJenisChannel = _useState3[0],\n      setListJenisChannel = _useState3[1];\n\n  var _useState4 = useState(false),\n      renderListJenisChannel = _useState4[0],\n      setRenderListJenisChannel = _useState4[1];\n\n  var _useState5 = useState({}),\n      focusJenisChannel = _useState5[0],\n      setFocusJenisChannel = _useState5[1];\n\n  var _useState6 = useState(\"\"),\n      searchOutlet = _useState6[0],\n      setSearchOutlet = _useState6[1];\n\n  var _useState7 = useState([]),\n      listOutlet = _useState7[0],\n      setListOutlet = _useState7[1];\n\n  var _useState8 = useState(false),\n      renderListOutlet = _useState8[0],\n      setRenderListOutlet = _useState8[1];\n\n  var _useState9 = useState({}),\n      focusOutlet = _useState9[0],\n      setFocusOutlet = _useState9[1];\n\n  var _useState10 = useState({}),\n      position = _useState10[0],\n      setPosition = _useState10[1];\n\n  var _useState11 = useState(false),\n      loading = _useState11[0],\n      setLoading = _useState11[1];\n\n  var _useState12 = useState(null),\n      error = _useState12[0],\n      setError = _useState12[1];\n\n  useEffect(function () {\n    // fetch on stop typing\n    var timeoutId = setTimeout(function () {\n      if (focusJenisChannel.jenisChannelID) {\n        getSearchOutlet(focusJenisChannel.jenisChannelID, searchOutlet).then(function (data) {\n          setListOutlet(data);\n        })[\"catch\"](function (err) {\n          console.log(err);\n        });\n      } else {\n        setListOutlet([]);\n      }\n    }, 1000);\n    return function () {\n      return clearTimeout(timeoutId);\n    };\n  }, [searchOutlet]);\n\n  var renderSearchJenisChannel = function renderSearchJenisChannel() {\n    var render = listJenisChannel.map(function (val, index) {\n      return /*#__PURE__*/_jsx(\"div\", {\n        onClick: function onClick() {\n          setFocusJenisChannel(val);\n          setSearchJenisChannel(val.namaJenisChannel);\n          setListJenisChannel([]);\n          setSearchOutlet(\"\");\n          setFocusOutlet({});\n        },\n        style: {\n          borderBottom: \".5px solid #f0f0f0\",\n          width: \"350px\"\n        },\n        children: val.namaJenisChannel\n      }, index);\n    });\n    return render;\n  };\n\n  var renderSearchOutlet = function renderSearchOutlet() {\n    var render = listOutlet.map(function (val, index) {\n      return /*#__PURE__*/_jsx(\"div\", {\n        onClick: function onClick() {\n          setFocusOutlet(val);\n          setSearchOutlet(val.namaOutlet);\n          setListOutlet([]);\n        },\n        style: {\n          borderBottom: \".5px solid #f0f0f0\",\n          width: \"350px\"\n        },\n        children: val.namaOutlet\n      }, index);\n    });\n    return render;\n  };\n\n  var onSearchJenisChannel = function onSearchJenisChannel(search) {\n    setRenderListJenisChannel(true);\n    setSearchJenisChannel(search);\n\n    if (search) {\n      getSearchJenisChannel(search).then(function (data) {\n        setListJenisChannel(data);\n      })[\"catch\"](function (err) {\n        console.log(err);\n      });\n    } else {\n      setListJenisChannel([]);\n    }\n  };\n\n  var onSearchOutlet = function onSearchOutlet(search) {\n    setRenderListOutlet(true);\n    setSearchOutlet(search);\n  };\n\n  var onSubmitSpreading = function onSubmitSpreading() {\n    if (focusJenisChannel.namaJenisChannel && focusOutlet.namaOutlet) {\n      actions.setSpreadingOutlet(focusOutlet);\n      actions.setSpreadingJenisChannel(focusJenisChannel);\n      Router.push(\"/visit/spreading/submit\");\n    }\n  };\n\n  var render = function render() {\n    if (loading) {\n      return /*#__PURE__*/_jsx(Spinner, {});\n    } else {\n      return /*#__PURE__*/_jsx(\"div\", {\n        className: styles.container,\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.wrapper,\n          children: [/*#__PURE__*/_jsx(Nav, {\n            backHref: \"/\"\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: styles.title_container,\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: styles.title,\n              children: \"Spreading\"\n            })\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.main,\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: styles.subtitle,\n              children: \"Jenis Channel\"\n            }), /*#__PURE__*/_jsx(\"input\", {\n              onChange: function onChange(e) {\n                onSearchJenisChannel(e.target.value);\n                setFocusJenisChannel({});\n                setSearchOutlet(\"\");\n                setFocusOutlet({});\n              },\n              value: searchJenisChannel,\n              placeholder: \"Search\",\n              className: styles.input,\n              onBlur: function onBlur() {\n                setTimeout(function () {\n                  setRenderListJenisChannel(false);\n                }, 200);\n              },\n              onFocus: function onFocus(e) {\n                return onSearchJenisChannel(e.target.value);\n              }\n            }), renderListJenisChannel ? /*#__PURE__*/_jsx(\"div\", {\n              style: {\n                position: \"absolute\",\n                maxHeight: \"180px\",\n                backgroundColor: \"white\",\n                overflowY: \"scroll\",\n                maxWidth: \"400px\",\n                padding: \"0 4px\",\n                zIndex: 999999\n              },\n              children: renderSearchJenisChannel()\n            }) : null, /*#__PURE__*/_jsx(\"div\", {\n              className: styles.subtitle,\n              children: \"Outlet\"\n            }), /*#__PURE__*/_jsx(\"input\", {\n              disabled: focusJenisChannel.namaJenisChannel ? false : true,\n              onChange: function onChange(e) {\n                onSearchOutlet(e.target.value);\n              },\n              value: searchOutlet,\n              placeholder: \"Search\",\n              className: styles.input,\n              onBlur: function onBlur() {\n                setTimeout(function () {\n                  setRenderListOutlet(false);\n                }, 200);\n              },\n              onFocus: function onFocus(e) {\n                return onSearchOutlet(e.target.value);\n              }\n            }), renderListOutlet ? /*#__PURE__*/_jsx(\"div\", {\n              style: {\n                position: \"absolute\",\n                maxHeight: \"180px\",\n                backgroundColor: \"white\",\n                overflowY: \"scroll\",\n                maxWidth: \"400px\",\n                padding: \"0 4px\",\n                zIndex: 999999\n              },\n              children: renderSearchOutlet()\n            }) : null, /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.bottom_container,\n              children: [/*#__PURE__*/_jsx(Button, {\n                text: \"Submit\",\n                onClick: function onClick() {\n                  onSubmitSpreading();\n                }\n              }), /*#__PURE__*/_jsx(Link, {\n                href: \"/visit/spreading/history\",\n                children: /*#__PURE__*/_jsx(\"a\", {\n                  children: /*#__PURE__*/_jsx(\"div\", {\n                    className: styles.view_history,\n                    children: \"View History\"\n                  })\n                })\n              }), /*#__PURE__*/_jsx(Link, {\n                href: \"/visit/spreading/submit?new=true\",\n                children: /*#__PURE__*/_jsx(\"a\", {\n                  style: {\n                    textDecoration: \"none\"\n                  },\n                  children: /*#__PURE__*/_jsx(Card, {\n                    style: {\n                      borderRadius: \"5px\",\n                      margin: \"22px 0\"\n                    },\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: styles.unplan_grid2,\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: styles.add_unplan,\n                        children: /*#__PURE__*/_jsx(\"div\", {\n                          style: {\n                            marginTop: \"-8px\"\n                          },\n                          children: \"+\"\n                        })\n                      }), /*#__PURE__*/_jsxs(\"div\", {\n                        style: {\n                          fontSize: \"16px\",\n                          fontWeight: \"600\"\n                        },\n                        children: [\"Add new outlet\", /*#__PURE__*/_jsx(\"div\", {\n                          style: {\n                            color: \"#B9B9C3\",\n                            fontWeight: \"300\",\n                            fontSize: \"13px\"\n                          },\n                          children: \"Outlet not available\"\n                        }), \" \"]\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        style: {\n                          textAlign: \"center\"\n                        },\n                        children: /*#__PURE__*/_jsx(\"img\", {\n                          src: \"/next.svg\"\n                        })\n                      })]\n                    })\n                  })\n                })\n              })]\n            })]\n          })]\n        })\n      });\n    }\n  };\n\n  return render();\n}","map":null,"metadata":{},"sourceType":"module"}