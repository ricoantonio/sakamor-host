{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\Rico\\\\Desktop\\\\Home\\\\Kalbe app\\\\sakamor-new\\\\pages\\\\reward\\\\index.jsx\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport styles from \"../../styles/pages/Reward.module.css\";\nimport Link from \"next/link\";\nimport { Stores } from \"../../store\";\nimport { getAllAnnouncement, getIncentiveYearly, getKpiInventiveMonthlySMR } from \"../../helper\";\nimport moment from \"moment\";\nimport BotNav from \"../../components/BotNav\";\nimport Nav from \"../../components/Nav\";\nimport Card from \"../../components/Card\";\nimport { Line } from \"react-chartjs-2\";\nimport Spinner from \"../../components/Spinner\";\nimport TabelLastDataIncentive from \"../../components/TableLastDataIncentive\";\nimport Modal from \"../../components/Modal\";\nexport default function Reward() {\n  const {\n    state,\n    dispatch,\n    actions\n  } = useContext(Stores);\n  const {\n    0: dataKpi,\n    1: setDataKpi\n  } = useState([]);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const {\n    0: dataGraph,\n    1: setDataGraph\n  } = useState([]);\n  const {\n    0: loadingModal,\n    1: setLoadingModal\n  } = useState(false);\n  const {\n    0: now,\n    1: setNow\n  } = useState(new Date());\n  const data = {\n    labels: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"June\", \"July\", \"Aug\", \"Sept\", \"Oct\", \"Nov\", \"Dec\"],\n    datasets: [{\n      label: \"Last Data Incentive\",\n      data: dataGraph,\n      fill: false,\n      backgroundColor: \"rgb(65, 134, 122)\",\n      borderColor: \"rgba(65, 134, 122, 0.2)\"\n    }]\n  };\n  const options = {\n    scales: {\n      yAxes: [{\n        ticks: {\n          // beginAtZero: true,\n          callback: function (label, index, labels) {\n            return Math.round(label / 100000 * 10) / 100 + \" k\";\n          }\n        }\n      }]\n    },\n    tooltips: {\n      enabled: false\n    },\n    hover: {\n      mode: null\n    }\n  };\n  useEffect(() => {\n    const userData = JSON.parse(localStorage.getItem(\"user\"));\n    setLoadingModal(true);\n    getKpiInventiveMonthlySMR(userData, now).then(dataKpi => {\n      setDataKpi(dataKpi);\n      getIncentiveYearly(userData).then(data => {\n        data.sort(function (a, b) {\n          return a.periode - b.periode;\n        });\n        var latestMonth = data[data.length - 1].periode;\n        var arrIncentive = [];\n        var yearlyIncentive = data.map(val => {\n          return val.totalInsentif;\n        });\n\n        for (let i = 0; i < parseInt(moment(latestMonth).format(\"M\")); i++) {\n          arrIncentive.push(0);\n        }\n\n        console.log(newArr);\n        setDataGraph(yearlyIncentive);\n        setLoading(false);\n        setLoadingModal(false);\n      }).catch(err => {\n        console.log(err);\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }, [dispatch, now]);\n\n  const total = () => {\n    var totalIncentive = 0;\n    dataKpi.map(val => {\n      var splitGroup = val.grup.split(\".\");\n\n      if (splitGroup[1] == 0) {\n        totalIncentive += val.insentif;\n      }\n    });\n    return totalIncentive;\n  };\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 12\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [loadingModal ? /*#__PURE__*/_jsxDEV(Modal, {\n        children: /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.wrapper,\n        children: [/*#__PURE__*/_jsxDEV(Nav, {\n          title: \"Reward\",\n          color: \"white\",\n          noBack: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.main,\n          children: [/*#__PURE__*/_jsxDEV(Card, {\n            style: {\n              borderRadius: \"6px\",\n              marginTop: \"20px\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              href: \"/reward/benefits\",\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                style: {\n                  textDecoration: \"none\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.reward_grid2,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: styles.add_reward,\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        marginTop: \"-11px\"\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"img\", {\n                        src: \"/alert-circle.svg\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 139,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 138,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 137,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontSize: \"16px\",\n                      fontWeight: \"600\",\n                      color: \"#FEB800\"\n                    },\n                    children: [\"Benefits\", /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        color: \"#B9B9C3\",\n                        fontWeight: \"300\",\n                        fontSize: \"13px\"\n                      },\n                      children: \"See you benefits here\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 150,\n                      columnNumber: 23\n                    }, this), \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 142,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      textAlign: \"center\"\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: \"/next.svg\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 161,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 160,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Card, {\n            style: {\n              borderRadius: \"6px\",\n              marginTop: \"20px\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Line, {\n              data: data,\n              options: options\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Card, {\n            style: {\n              borderRadius: \"6px\",\n              marginTop: \"20px\",\n              padding: \"15px\",\n              color: \"#5E5873\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    marginRight: \"5px\"\n                  },\n                  onClick: () => {\n                    if (moment(now).format(\"MMMM YYYY\") !== moment().subtract(1, \"years\").format(\"MMMM YYYY\")) {\n                      setNow(moment(now).subtract(1, \"months\"));\n                    }\n                  },\n                  children: moment(now).format(\"MMMM YYYY\") !== moment().subtract(1, \"years\").format(\"MMMM YYYY\") ? /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: \"/cev_left.svg\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 193,\n                    columnNumber: 23\n                  }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                    style: {\n                      height: \"20px\"\n                    },\n                    src: \"/chev_left_gray.svg\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 195,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: moment(now).format(\"MMMM YYYY\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    marginLeft: \"5px\"\n                  },\n                  onClick: () => {\n                    if (moment().format(\"MMMM YYYY\") !== moment(now).format(\"MMMM YYYY\")) {\n                      setNow(moment(now).add(1, \"months\"));\n                    }\n                  },\n                  children: moment().format(\"MMMM YYYY\") !== moment(now).format(\"MMMM YYYY\") ? /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: \"/next.svg\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 215,\n                    columnNumber: 23\n                  }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                    style: {\n                      height: \"20px\"\n                    },\n                    src: \"/chev_right_gray.svg\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 217,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: \"24px\",\n                fontWeight: \"700\",\n                color: \"#41867a\"\n              },\n              children: dataKpi ? `${total().toLocaleString(\"id-ID\")} IDR` : /*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"No data\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Card, {\n            style: {\n              borderRadius: \"6px\",\n              marginTop: \"20px\",\n              padding: \"15px\",\n              color: \"#5E5873\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: \"700\"\n              },\n              children: [\"KPI Incentive Monthly ( \", moment(now).format(\"MMMM YYYY\"), \" )\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 15\n            }, this), dataKpi ? /*#__PURE__*/_jsxDEV(TabelLastDataIncentive, {\n              data: dataKpi\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"No Data\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: \"120px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BotNav, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n}","map":{"version":3,"sources":["C:/Users/Rico/Desktop/Home/Kalbe app/sakamor-new/pages/reward/index.jsx"],"names":["React","useState","useEffect","useContext","styles","Link","Stores","getAllAnnouncement","getIncentiveYearly","getKpiInventiveMonthlySMR","moment","BotNav","Nav","Card","Line","Spinner","TabelLastDataIncentive","Modal","Reward","state","dispatch","actions","dataKpi","setDataKpi","loading","setLoading","dataGraph","setDataGraph","loadingModal","setLoadingModal","now","setNow","Date","data","labels","datasets","label","fill","backgroundColor","borderColor","options","scales","yAxes","ticks","callback","index","Math","round","tooltips","enabled","hover","mode","userData","JSON","parse","localStorage","getItem","then","sort","a","b","periode","latestMonth","length","arrIncentive","yearlyIncentive","map","val","totalInsentif","i","parseInt","format","push","console","log","newArr","catch","err","total","totalIncentive","splitGroup","grup","split","insentif","wrapper","main","borderRadius","marginTop","textDecoration","reward_grid2","add_reward","fontSize","fontWeight","color","textAlign","padding","marginRight","subtract","height","marginLeft","add","toLocaleString","marginBottom"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport styles from \"../../styles/pages/Reward.module.css\";\r\nimport Link from \"next/link\";\r\nimport { Stores } from \"../../store\";\r\nimport {\r\n  getAllAnnouncement,\r\n  getIncentiveYearly,\r\n  getKpiInventiveMonthlySMR,\r\n} from \"../../helper\";\r\nimport moment from \"moment\";\r\nimport BotNav from \"../../components/BotNav\";\r\nimport Nav from \"../../components/Nav\";\r\nimport Card from \"../../components/Card\";\r\nimport { Line } from \"react-chartjs-2\";\r\n\r\nimport Spinner from \"../../components/Spinner\";\r\nimport TabelLastDataIncentive from \"../../components/TableLastDataIncentive\";\r\nimport Modal from \"../../components/Modal\";\r\n\r\nexport default function Reward() {\r\n  const { state, dispatch, actions } = useContext(Stores);\r\n  const [dataKpi, setDataKpi] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [dataGraph, setDataGraph] = useState([]);\r\n  const [loadingModal, setLoadingModal] = useState(false);\r\n  const [now, setNow] = useState(new Date());\r\n\r\n  const data = {\r\n    labels: [\r\n      \"Jan\",\r\n      \"Feb\",\r\n      \"Mar\",\r\n      \"Apr\",\r\n      \"May\",\r\n      \"June\",\r\n      \"July\",\r\n      \"Aug\",\r\n      \"Sept\",\r\n      \"Oct\",\r\n      \"Nov\",\r\n      \"Dec\",\r\n    ],\r\n    datasets: [\r\n      {\r\n        label: \"Last Data Incentive\",\r\n        data: dataGraph,\r\n        fill: false,\r\n        backgroundColor: \"rgb(65, 134, 122)\",\r\n        borderColor: \"rgba(65, 134, 122, 0.2)\",\r\n      },\r\n    ],\r\n  };\r\n\r\n  const options = {\r\n    scales: {\r\n      yAxes: [\r\n        {\r\n          ticks: {\r\n            // beginAtZero: true,\r\n            callback: function (label, index, labels) {\r\n              return Math.round((label / 100000) * 10) / 100 + \" k\";\r\n            },\r\n          },\r\n        },\r\n      ],\r\n    },\r\n    tooltips: { enabled: false },\r\n    hover: { mode: null },\r\n  };\r\n\r\n  useEffect(() => {\r\n    const userData = JSON.parse(localStorage.getItem(\"user\"));\r\n    setLoadingModal(true);\r\n    getKpiInventiveMonthlySMR(userData, now)\r\n      .then((dataKpi) => {\r\n        setDataKpi(dataKpi);\r\n        getIncentiveYearly(userData)\r\n          .then((data) => {\r\n            data.sort(function (a, b) {\r\n              return a.periode - b.periode;\r\n            });\r\n            var latestMonth = data[data.length - 1].periode;\r\n\r\n            var arrIncentive = [];\r\n            var yearlyIncentive = data.map((val) => {\r\n              return val.totalInsentif;\r\n            });\r\n            for (\r\n              let i = 0;\r\n              i < parseInt(moment(latestMonth).format(\"M\"));\r\n              i++\r\n            ) {\r\n              arrIncentive.push(0);\r\n            }\r\n            console.log(newArr);\r\n            setDataGraph(yearlyIncentive);\r\n            setLoading(false);\r\n            setLoadingModal(false);\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, [dispatch, now]);\r\n\r\n  const total = () => {\r\n    var totalIncentive = 0;\r\n    dataKpi.map((val) => {\r\n      var splitGroup = val.grup.split(\".\");\r\n      if (splitGroup[1] == 0) {\r\n        totalIncentive += val.insentif;\r\n      }\r\n    });\r\n    return totalIncentive;\r\n  };\r\n\r\n  if (loading) {\r\n    return <Spinner />;\r\n  } else {\r\n    return (\r\n      <>\r\n        {loadingModal ? (\r\n          <Modal>\r\n            <Spinner />\r\n          </Modal>\r\n        ) : null}\r\n        <div className={styles.wrapper}>\r\n          <Nav title={\"Reward\"} color={\"white\"} noBack />\r\n          <div className={styles.main}>\r\n            <Card style={{ borderRadius: \"6px\", marginTop: \"20px\" }}>\r\n              <Link href=\"/reward/benefits\">\r\n                <a style={{ textDecoration: \"none\" }}>\r\n                  <div className={styles.reward_grid2}>\r\n                    <div className={styles.add_reward}>\r\n                      <div style={{ marginTop: \"-11px\" }}>\r\n                        <img src={\"/alert-circle.svg\"} />\r\n                      </div>\r\n                    </div>\r\n                    <div\r\n                      style={{\r\n                        fontSize: \"16px\",\r\n                        fontWeight: \"600\",\r\n                        color: \"#FEB800\",\r\n                      }}\r\n                    >\r\n                      Benefits\r\n                      <div\r\n                        style={{\r\n                          color: \"#B9B9C3\",\r\n                          fontWeight: \"300\",\r\n                          fontSize: \"13px\",\r\n                        }}\r\n                      >\r\n                        See you benefits here\r\n                      </div>{\" \"}\r\n                    </div>\r\n                    <div style={{ textAlign: \"center\" }}>\r\n                      <img src={\"/next.svg\"} />\r\n                    </div>\r\n                  </div>\r\n                </a>\r\n              </Link>\r\n            </Card>\r\n            <Card style={{ borderRadius: \"6px\", marginTop: \"20px\" }}>\r\n              <Line data={data} options={options} />\r\n            </Card>\r\n            <Card\r\n              style={{\r\n                borderRadius: \"6px\",\r\n                marginTop: \"20px\",\r\n                padding: \"15px\",\r\n                color: \"#5E5873\",\r\n              }}\r\n            >\r\n              <div>\r\n                <div>\r\n                  <span\r\n                    style={{ marginRight: \"5px\" }}\r\n                    onClick={() => {\r\n                      if (\r\n                        moment(now).format(\"MMMM YYYY\") !==\r\n                        moment().subtract(1, \"years\").format(\"MMMM YYYY\")\r\n                      ) {\r\n                        setNow(moment(now).subtract(1, \"months\"));\r\n                      }\r\n                    }}\r\n                  >\r\n                    {moment(now).format(\"MMMM YYYY\") !==\r\n                    moment().subtract(1, \"years\").format(\"MMMM YYYY\") ? (\r\n                      <img src={\"/cev_left.svg\"} />\r\n                    ) : (\r\n                      <img\r\n                        style={{ height: \"20px\" }}\r\n                        src={\"/chev_left_gray.svg\"}\r\n                      />\r\n                    )}\r\n                  </span>\r\n                  <span>{moment(now).format(\"MMMM YYYY\")}</span>\r\n                  <span\r\n                    style={{ marginLeft: \"5px\" }}\r\n                    onClick={() => {\r\n                      if (\r\n                        moment().format(\"MMMM YYYY\") !==\r\n                        moment(now).format(\"MMMM YYYY\")\r\n                      ) {\r\n                        setNow(moment(now).add(1, \"months\"));\r\n                      }\r\n                    }}\r\n                  >\r\n                    {moment().format(\"MMMM YYYY\") !==\r\n                    moment(now).format(\"MMMM YYYY\") ? (\r\n                      <img src={\"/next.svg\"} />\r\n                    ) : (\r\n                      <img\r\n                        style={{ height: \"20px\" }}\r\n                        src={\"/chev_right_gray.svg\"}\r\n                      />\r\n                    )}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div\r\n                style={{\r\n                  fontSize: \"24px\",\r\n                  fontWeight: \"700\",\r\n                  color: \"#41867a\",\r\n                }}\r\n              >\r\n                {dataKpi ? (\r\n                  `${total().toLocaleString(\"id-ID\")} IDR`\r\n                ) : (\r\n                  <div>No data</div>\r\n                )}\r\n              </div>\r\n            </Card>\r\n            <Card\r\n              style={{\r\n                borderRadius: \"6px\",\r\n                marginTop: \"20px\",\r\n                padding: \"15px\",\r\n                color: \"#5E5873\",\r\n              }}\r\n            >\r\n              <div style={{ fontWeight: \"700\" }}>\r\n                KPI Incentive Monthly ( {moment(now).format(\"MMMM YYYY\")} )\r\n              </div>\r\n              {dataKpi ? (\r\n                <TabelLastDataIncentive data={dataKpi} />\r\n              ) : (\r\n                <div>No Data</div>\r\n              )}\r\n            </Card>\r\n            <div style={{ marginBottom: \"120px\" }} />\r\n          </div>\r\n        </div>\r\n        <BotNav />\r\n      </>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}