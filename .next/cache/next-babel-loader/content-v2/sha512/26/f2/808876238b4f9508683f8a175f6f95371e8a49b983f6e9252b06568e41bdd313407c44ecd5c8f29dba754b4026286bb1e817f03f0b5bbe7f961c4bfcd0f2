{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport Router from \"next/router\";\nimport { Stores } from \"../../../store\";\nimport Link from \"next/link\";\nimport styles from \"../../../styles/components/History.module.css\";\nimport Nav from \"../../../components/Nav\";\nimport Spinner from \"../../../components/Spinner\";\nimport Card from \"../../../components/Card\";\nimport { getAuth, getPlanMonthlyHistory, getUnplanMonthlyHistory, getSpreadingMonthlyHistory, getWorkVisitMonthlyHistory } from \"../../../helper\";\nexport default function History({\n  type\n}) {\n  const {\n    state,\n    dispatch,\n    actions\n  } = useContext(Stores);\n  const {\n    0: history,\n    1: setHistory\n  } = useState([]);\n  const {\n    0: search,\n    1: setSearch\n  } = useState(\"\");\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  useEffect(() => {\n    const userData = JSON.parse(localStorage.getItem(\"user\"));\n    const userMenu = JSON.parse(localStorage.getItem(\"menu\"));\n\n    if (userData) {\n      getAuth(userData).then(data => {\n        var auth = data.filter(val => {\n          return val.moduleCode === type;\n        });\n        var menu = userMenu.filter(val => {\n          return val.moduleCode === type;\n        });\n\n        if (!(auth && menu)) {\n          Router.push(\"/\");\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    } else {\n      Router.push(\"/\");\n    }\n  }, [dispatch]);\n  useEffect(() => {\n    const userData = JSON.parse(localStorage.getItem(\"user\"));\n    getWorkVisitMonthlyHistory(userData).then(res => {\n      setHistory(res);\n      setLoading(false);\n    }).catch(err => console.log(err));\n  }, [dispatch]);\n\n  const renderList = () => {\n    const filterData = history.filter(val => {\n      if (val.namaSMR !== null) {\n        return val.namaSMR.toLowerCase().includes(search.toLowerCase());\n      }\n    });\n    const render = filterData.map((val, index) => {\n      return /*#__PURE__*/_jsx(Link, {\n        href: `/work-visit/history/${val.idWorkVisit}`,\n        children: /*#__PURE__*/_jsx(\"a\", {\n          style: {\n            textDecoration: \"none\"\n          },\n          children: /*#__PURE__*/_jsx(Card, {\n            style: {\n              marginTop: \"22px\",\n              borderRadius: \"5px\"\n            },\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.history_workvisit_container,\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                style: {\n                  padding: \"21px 18px\",\n                  color: \"black\"\n                },\n                children: /*#__PURE__*/_jsx(\"div\", {\n                  className: styles.top_grid,\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      style: {\n                        fontSize: \"12px\",\n                        fontWeight: \"400\",\n                        marginBottom: \"8px\"\n                      },\n                      children: /*#__PURE__*/_jsx(\"span\", {\n                        className: styles.rayon_container,\n                        children: val.kodeRayon\n                      })\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      style: {\n                        fontSize: \"18px\",\n                        fontWeight: \"500\"\n                      },\n                      children: val.namaSMR\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      style: {\n                        fontSize: \"12px\",\n                        fontWeight: \"400\"\n                      },\n                      children: \"Produk Focus\"\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      style: {\n                        fontSize: \"12px\",\n                        fontWeight: \"400\"\n                      },\n                      children: /*#__PURE__*/_jsx(\"span\", {\n                        className: styles.produk_fokus_container,\n                        children: val.produkFokus\n                      })\n                    })]\n                  })\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                style: {\n                  margin: \"auto\",\n                  padding: \"18px\"\n                },\n                children: /*#__PURE__*/_jsx(\"img\", {\n                  src: \"/done.svg\",\n                  style: {\n                    height: \"60px\"\n                  }\n                })\n              })]\n            })\n          })\n        })\n      });\n    });\n\n    if (filterData.length == 0) {\n      return /*#__PURE__*/_jsx(\"div\", {\n        style: {\n          textAlign: \"center\",\n          marginTop: \"150px\",\n          color: \"#d0d0d0\"\n        },\n        children: \"No Item\"\n      });\n    } else {\n      return render;\n    }\n  };\n\n  const render = () => {\n    if (loading) {\n      return /*#__PURE__*/_jsx(Spinner, {});\n    } else {\n      return /*#__PURE__*/_jsx(\"div\", {\n        className: styles.container,\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.wrapper,\n          children: [/*#__PURE__*/_jsx(Nav, {\n            title: \"History\",\n            backAction: () => Router.push(\"/work-visit\"),\n            color: \"white\"\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.main,\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: styles.search_fixed,\n              children: /*#__PURE__*/_jsx(\"input\", {\n                onChange: e => {\n                  setSearch(e.target.value);\n                },\n                placeholder: \"Search\",\n                className: styles.input,\n                style: {\n                  marginTop: \"0\"\n                }\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              style: {\n                margin: \"60px 0\"\n              },\n              children: renderList()\n            })]\n          })]\n        })\n      });\n    }\n  };\n\n  return render();\n}","map":null,"metadata":{},"sourceType":"module"}