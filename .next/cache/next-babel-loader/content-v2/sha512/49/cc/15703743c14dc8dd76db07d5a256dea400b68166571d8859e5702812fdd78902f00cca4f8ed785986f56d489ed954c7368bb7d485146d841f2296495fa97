{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"C:/Users/Rico/Desktop/Home/Kalbe app/sakamor-new/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/Rico/Desktop/Home/Kalbe app/sakamor-new/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useState, useContext, useEffect, useRef } from \"react\";\nimport Head from \"next/head\";\nimport styles from \"../styles/pages/Home.module.css\";\nimport Router from \"next/router\";\nimport Link from \"next/link\";\nimport { Stores } from \"../store\";\nimport Spinner from \"../components/Spinner\";\nimport BotNav from \"../components/BotNav\";\nimport Button from \"../components/Button\";\nimport Card from \"../components/Card\";\nimport { firebaseCloudMessaging } from \"../webPush\";\nimport firebase from \"firebase/app\";\nimport { getAllAnnouncement, getAllWorkVisit, getAuth, getFrontliner, getMenu, getNoo, getPlanHistory, getPlanList, getProduktifitas, getSalesTarget75SMR, getSalesTargetSMR, getSpreadingMonthlyHistory, getUnplanMonthlyHistory } from \"../helper\";\nimport { Doughnut } from \"react-chartjs-2\";\nimport moment from \"moment\";\nexport default function Home() {\n  var _useContext = useContext(Stores),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch,\n      actions = _useContext.actions;\n\n  var _useState = useState(\"\"),\n      focus = _useState[0],\n      setFocus = _useState[1];\n\n  var _useState2 = useState([]),\n      plan = _useState2[0],\n      setPlan = _useState2[1];\n\n  var _useState3 = useState([]),\n      workVisit = _useState3[0],\n      setWorkVisit = _useState3[1];\n\n  var _useState4 = useState([]),\n      workVisitHistory = _useState4[0],\n      setWorkVisitHistory = _useState4[1];\n\n  var _useState5 = useState([]),\n      planHistory = _useState5[0],\n      setPlanHistory = _useState5[1];\n\n  var _useState6 = useState([]),\n      spreadingHistory = _useState6[0],\n      setSpreadingHistory = _useState6[1];\n\n  var _useState7 = useState([]),\n      unplanHistory = _useState7[0],\n      setUnplanHistory = _useState7[1];\n\n  var _useState8 = useState(\"\"),\n      role = _useState8[0],\n      setRole = _useState8[1];\n\n  var _useState9 = useState([]),\n      topMenu = _useState9[0],\n      setTopMenu = _useState9[1];\n\n  var _useState10 = useState(true),\n      loading = _useState10[0],\n      setLoading = _useState10[1];\n\n  var _useState11 = useState(true),\n      loadingMenu = _useState11[0],\n      setLoadingMenu = _useState11[1];\n\n  var _useState12 = useState([]),\n      newAnnouncement = _useState12[0],\n      setNewAnnouncement = _useState12[1];\n\n  var _useState13 = useState(false),\n      notif = _useState13[0],\n      setNotif = _useState13[1];\n\n  var _useState14 = useState([]),\n      salesTarget = _useState14[0],\n      setSalesTarget = _useState14[1];\n\n  var _useState15 = useState([]),\n      salesTarget75 = _useState15[0],\n      setSalesTarget75 = _useState15[1];\n\n  var _useState16 = useState([]),\n      produktifitas = _useState16[0],\n      setProduktifitas = _useState16[1];\n\n  var _useState17 = useState([]),\n      frontliner = _useState17[0],\n      setFrontliner = _useState17[1];\n\n  var _useState18 = useState([]),\n      NOO = _useState18[0],\n      setNOO = _useState18[1];\n\n  var isMounted = useRef(true);\n  var dataPlan = {\n    datasets: [{\n      data: planHistory.length === 0 ? [0, 1] : [planHistory.length, plan.length],\n      backgroundColor: [\"#41867a\", \"#d1e4e1\"]\n    }]\n  };\n  var dataSpreading = {\n    datasets: [{\n      data: spreadingHistory.length === 0 ? [0, 1] : [0, 1],\n      backgroundColor: [\"#41867a\", \"#d1e4e1\"]\n    }]\n  };\n  var dataWorkVisit = {\n    datasets: [{\n      data: workVisitHistory.length === 0 ? [0, 1] : [workVisitHistory.length, workVisit.length],\n      backgroundColor: [\"#41867a\", \"#d1e4e1\"]\n    }]\n  };\n  var donutOptions = {\n    cutoutPercentage: 75,\n    tooltips: {\n      enabled: false\n    },\n    hover: {\n      mode: null\n    },\n    responsive: true,\n    maintainAspectRatio: true\n  };\n  useEffect(function () {\n    if (isMounted.current) {\n      var setToken = /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          var token;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.prev = 0;\n                  _context.next = 3;\n                  return firebaseCloudMessaging.init();\n\n                case 3:\n                  token = _context.sent;\n\n                  if (token) {\n                    getMessage();\n                  }\n\n                  _context.next = 10;\n                  break;\n\n                case 7:\n                  _context.prev = 7;\n                  _context.t0 = _context[\"catch\"](0);\n                  console.log(_context.t0);\n\n                case 10:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, null, [[0, 7]]);\n        }));\n\n        return function setToken() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n\n      var getMessage = function getMessage() {\n        var messaging = firebase.messaging();\n        console.log({\n          messaging: messaging\n        });\n        messaging.onMessage(function (message) {\n          setNotif(true);\n        });\n      };\n\n      setToken();\n    }\n\n    return function () {\n      isMounted.current = false;\n    };\n  }, [isMounted]);\n  useEffect(function () {\n    var userData = JSON.parse(localStorage.getItem(\"user\"));\n\n    if (userData) {\n      getAllAnnouncement(userData).then(function (data) {\n        var newAnnouncement = data.filter(function (val) {\n          return val.isRead === false;\n        });\n        setNewAnnouncement(newAnnouncement);\n\n        if (newAnnouncement.length > 0) {\n          setNotif(true);\n        } else {\n          setNotif(false);\n        }\n      })[\"catch\"](function (err) {\n        console.log(err);\n      });\n    }\n  }, []);\n  useEffect(function () {\n    var userData = JSON.parse(localStorage.getItem(\"user\"));\n\n    if (userData) {\n      actions.userLogin(userData);\n      getMenu(userData).then(function (data) {\n        actions.setMenu(data);\n        setTopMenu(data);\n        setLoadingMenu(false);\n      })[\"catch\"](function (err) {\n        console.log(err);\n      });\n    } else {\n      Router.push(\"/\");\n    }\n  }, [dispatch]);\n  useEffect(function () {\n    var userData = JSON.parse(localStorage.getItem(\"user\"));\n    var month = moment().format(\"M\");\n    var year = moment().format(\"Y\");\n\n    if (userData) {\n      getAuth(userData).then(function (data) {\n        if (data[0].roleCode === \"PIMCAB\") {\n          setRole(\"PIMCAB\");\n          setFocus(\"WORK-VISIT\");\n        } else if (data[0].roleCode === \"SMR\") {\n          setRole(\"SMR\");\n          setFocus(\"PLAN\");\n          getSalesTargetSMR(userData, month, year).then(function (data) {\n            setSalesTarget(data);\n          })[\"catch\"](function (err) {\n            console.log(err);\n          });\n          getSalesTarget75SMR(userData, month, year).then(function (data) {\n            setSalesTarget75(data);\n          })[\"catch\"](function (err) {\n            console.log(err);\n          });\n          getProduktifitas(userData, month, year).then(function (data) {\n            setProduktifitas(data);\n          })[\"catch\"](function (err) {\n            console.log(err);\n          });\n          getFrontliner(userData, month, year).then(function (data) {\n            setFrontliner(data);\n          })[\"catch\"](function (err) {\n            console.log(err);\n          });\n          getNoo(userData, month, year).then(function (data) {\n            setNOO(data);\n            console.log(data);\n          })[\"catch\"](function (err) {\n            console.log(err);\n          });\n        }\n      })[\"catch\"](function (err) {\n        console.log(err);\n      });\n    } else {\n      Router.push(\"/\");\n    }\n  }, [dispatch]);\n  useEffect(function () {\n    setLoading(true);\n    var userData = JSON.parse(localStorage.getItem(\"user\"));\n\n    if (userData) {\n      if (focus === \"PLAN\") {\n        getPlanList(userData).then(function (data) {\n          setPlan(data);\n          setLoading(false);\n        })[\"catch\"](function (err) {\n          console.log(err);\n        });\n      } else if (focus === \"WORK-VISIT\") {\n        getAllWorkVisit(userData).then(function (data) {\n          console.log(data);\n          setWorkVisit(data.filter(function (val) {\n            return val.isPenilaian === false;\n          }));\n          setWorkVisitHistory(data.filter(function (val) {\n            return val.isPenilaian === true;\n          }));\n          setLoading(false);\n        })[\"catch\"](function (err) {\n          console.log(err);\n        });\n      }\n    } else {\n      Router.push(\"/\");\n    }\n  }, [focus]);\n  useEffect(function () {\n    var userData = JSON.parse(localStorage.getItem(\"user\"));\n\n    if (focus === \"PLAN\") {\n      getPlanHistory(userData).then(function (data) {\n        setPlanHistory(data);\n        setLoading(false); // console.log(data);\n      })[\"catch\"](function (err) {\n        console.log(err);\n      });\n    } else if (focus === \"UNPLAN\") {\n      getUnplanMonthlyHistory(userData).then(function (data) {\n        // console.log(data);\n        setUnplanHistory(data);\n        setLoading(false);\n      })[\"catch\"](function (err) {\n        console.log(err);\n      });\n    } else if (focus === \"SPREADING\") {\n      getSpreadingMonthlyHistory(userData).then(function (data) {\n        // console.log(data);\n        setSpreadingHistory(data);\n        setLoading(false);\n      })[\"catch\"](function (err) {\n        console.log(err);\n      });\n    }\n  }, [focus]);\n\n  var renderTopMenu = function renderTopMenu() {\n    var auth = topMenu.filter(function (val) {\n      if (role === \"SMR\") {\n        return val.moduleCode === \"PLAN\" || val.moduleCode === \"UNPLAN\" || val.moduleCode === \"SPREADING\";\n      } else if (role === \"PIMCAB\") {\n        return val.moduleCode === \"WORK-VISIT\";\n      }\n    });\n\n    var render = function render() {\n      return auth.map(function (val, index) {\n        return /*#__PURE__*/_jsx(\"div\", {\n          className: focus === val.moduleCode ? styles.focus_menu : styles.menu,\n          onClick: function onClick() {\n            setFocus(val.moduleCode);\n          },\n          children: val.moduleCode === \"PLAN\" ? \"Plan\" : val.moduleCode === \"UNPLAN\" ? \"Unplan\" : val.moduleCode === \"SPREADING\" ? \"Spreading\" : val.moduleCode === \"WORK-VISIT\" ? \"Work Visit\" : \"\"\n        }, index);\n      });\n    };\n\n    if (auth) {\n      return /*#__PURE__*/_jsx(\"div\", {\n        className: auth.length === 3 ? styles.menu_grid3 : auth.length === 1 ? styles.menu_grid1 : \"\",\n        children: render()\n      });\n    }\n  };\n\n  var renderList = function renderList(type, data) {\n    if (data.length === 0) {\n      return /*#__PURE__*/_jsx(\"div\", {\n        style: {\n          fontSize: \"15px\",\n          color: \"rgb(208, 208, 208)\",\n          textAlign: \"left\",\n          margin: \"30px 0\"\n        },\n        children: \"No Item\"\n      });\n    } else {\n      return data.map(function (val, index) {\n        return /*#__PURE__*/_jsx(Link, {\n          href: focus === \"PLAN\" ? \"/visit/plan/\".concat(data.idMasterPlan) : \"/\",\n          children: /*#__PURE__*/_jsx(\"a\", {\n            children: /*#__PURE__*/_jsx(\"div\", {\n              style: {\n                fontSize: \"15px\",\n                fontWeight: \"700\",\n                color: \"#5E5873\",\n                textAlign: \"left\",\n                margin: \"10px 0\"\n              },\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                style: {\n                  display: \"grid\",\n                  gridTemplateColumns: \"12% 88%\"\n                },\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  style: {\n                    width: \"20px\",\n                    height: \"20px\",\n                    backgroundColor: type === \"PLAN\" ? \"#FFF1CC\" : \"#d1e4e1\",\n                    borderRadius: \"20px\",\n                    padding: \"4px\"\n                  },\n                  children: /*#__PURE__*/_jsx(\"div\", {\n                    style: {\n                      width: \"12px\",\n                      height: \"12px\",\n                      backgroundColor: type === \"PLAN\" ? \"#feb800\" : \"#41867a\",\n                      borderRadius: \"20px\"\n                    }\n                  })\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    children: val.namaOutlet\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    style: {\n                      fontSize: \"14px\",\n                      fontWeight: \"300\"\n                    },\n                    children: val.alamatOutlet\n                  })]\n                })]\n              })\n            }, index)\n          })\n        });\n      });\n    }\n  };\n\n  var renderListWorkVisit = function renderListWorkVisit(data) {\n    if (data.length === 0) {\n      return /*#__PURE__*/_jsx(\"div\", {\n        style: {\n          fontSize: \"15px\",\n          color: \"rgb(208, 208, 208)\",\n          textAlign: \"left\",\n          margin: \"30px 0\"\n        },\n        children: \"No Item\"\n      });\n    } else {\n      return data.map(function (val, index) {\n        return /*#__PURE__*/_jsx(Link, {\n          href: \"work-visit/\".concat(val.idMasterPlan),\n          children: /*#__PURE__*/_jsx(\"a\", {\n            children: /*#__PURE__*/_jsx(\"div\", {\n              style: {\n                fontSize: \"15px\",\n                fontWeight: \"700\",\n                color: \"#5E5873\",\n                textAlign: \"left\",\n                margin: \"10px 0\"\n              },\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                style: {\n                  display: \"grid\",\n                  gridTemplateColumns: \"12% 88%\"\n                },\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  style: {\n                    width: \"20px\",\n                    height: \"20px\",\n                    backgroundColor: \"#FFF1CC\",\n                    borderRadius: \"20px\",\n                    padding: \"4px\"\n                  },\n                  children: /*#__PURE__*/_jsx(\"div\", {\n                    style: {\n                      width: \"12px\",\n                      height: \"12px\",\n                      backgroundColor: \"#feb800\",\n                      borderRadius: \"20px\"\n                    }\n                  })\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    children: val.namaSMR\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    style: {\n                      fontSize: \"14px\",\n                      fontWeight: \"300\"\n                    },\n                    children: [\"Rayon - \", val.rayon]\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    style: {\n                      fontSize: \"14px\",\n                      fontWeight: \"300\"\n                    },\n                    children: [\"Produk Focus - \", val.produkFokus]\n                  })]\n                })]\n              })\n            }, index)\n          })\n        });\n      });\n    }\n  };\n\n  var renderPlan = function renderPlan() {\n    if (loading) {\n      return /*#__PURE__*/_jsx(Spinner, {});\n    } else {\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(Card, {\n          style: {\n            borderRadius: \"5px\",\n            marginTop: \"22px\"\n          },\n          shadow: true,\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.overview,\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              children: [/*#__PURE__*/_jsx(\"span\", {\n                className: styles.date,\n                children: moment().format(\"D / MMM / YYYY\")\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                style: {\n                  color: \"#5E5873\",\n                  marginTop: \"7px\"\n                },\n                children: [/*#__PURE__*/_jsx(\"span\", {\n                  style: {\n                    fontSize: \"36px\",\n                    fontWeight: \"600\"\n                  },\n                  children: planHistory.length\n                }), /*#__PURE__*/_jsxs(\"span\", {\n                  style: {\n                    fontSize: \"18px\"\n                  },\n                  children: [\"/\", plan.length + planHistory.length]\n                })]\n              }), /*#__PURE__*/_jsx(\"button\", {\n                style: {\n                  marginTop: \"7px\",\n                  backgroundColor: \"#FEB800\",\n                  padding: \"10px 22px\",\n                  fontSize: \"14px\",\n                  fontWeight: \"400\",\n                  color: \"#fff\",\n                  border: \"none\",\n                  borderRadius: \"5px\"\n                },\n                children: \"Add New Plan +\"\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: styles.pie_percentage,\n                children: planHistory.length === 0 ? \"0%\" : \"\".concat(Math.round(planHistory.length / (plan.length + planHistory.length) * 100), \"%\")\n              }), /*#__PURE__*/_jsx(Doughnut, {\n                data: dataPlan,\n                options: donutOptions,\n                width: 100,\n                height: 100\n              })]\n            })]\n          })\n        }), /*#__PURE__*/_jsx(Card, {\n          style: {\n            marginTop: \"22px\",\n            borderRadius: \"30px\"\n          },\n          shadow: true,\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.plan_container,\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              style: {\n                fontSize: \"18px\",\n                fontWeight: \"500\",\n                color: \"#5E5873\",\n                textAlign: \"left\"\n              },\n              children: \"Your Plan Today\"\n            }), /*#__PURE__*/_jsx(\"div\", {\n              style: {\n                margin: \"22px 0\"\n              },\n              children: renderList(\"PLAN\", plan)\n            }), /*#__PURE__*/_jsx(Link, {\n              href: \"/visit/plan\",\n              children: /*#__PURE__*/_jsx(\"a\", {\n                children: /*#__PURE__*/_jsx(Button, {\n                  text: \"See Details\"\n                })\n              })\n            })]\n          })\n        })]\n      });\n    }\n  };\n\n  var renderSpreading = function renderSpreading() {\n    if (loading) {\n      return /*#__PURE__*/_jsx(Spinner, {});\n    } else {\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(Card, {\n          style: {\n            borderRadius: \"5px\",\n            marginTop: \"22px\"\n          },\n          shadow: true,\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.overview,\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              children: [/*#__PURE__*/_jsx(\"span\", {\n                className: styles.date,\n                children: moment().format(\"D / MMM / YYYY\")\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                style: {\n                  color: \"#5E5873\",\n                  marginTop: \"7px\"\n                },\n                children: [/*#__PURE__*/_jsx(\"span\", {\n                  style: {\n                    fontSize: \"36px\",\n                    fontWeight: \"600\"\n                  },\n                  children: spreadingHistory.length\n                }), /*#__PURE__*/_jsxs(\"span\", {\n                  style: {\n                    fontSize: \"18px\"\n                  },\n                  children: [\"/\", plan.length]\n                })]\n              }), /*#__PURE__*/_jsx(Link, {\n                href: \"/visit/spreading/\",\n                children: /*#__PURE__*/_jsx(\"a\", {\n                  children: /*#__PURE__*/_jsx(\"button\", {\n                    style: {\n                      marginTop: \"7px\",\n                      backgroundColor: \"#FEB800\",\n                      padding: \"10px 22px\",\n                      fontSize: \"14px\",\n                      fontWeight: \"400\",\n                      color: \"#fff\",\n                      border: \"none\",\n                      borderRadius: \"5px\"\n                    },\n                    children: \"Add New NOO +\"\n                  })\n                })\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: styles.pie_percentage,\n                children: \"0%\"\n              }), /*#__PURE__*/_jsx(Doughnut, {\n                data: dataSpreading,\n                options: donutOptions,\n                width: 100,\n                height: 100\n              })]\n            })]\n          })\n        }), /*#__PURE__*/_jsx(Card, {\n          style: {\n            marginTop: \"22px\",\n            borderRadius: \"30px\"\n          },\n          shadow: true,\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.plan_container,\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              style: {\n                fontSize: \"18px\",\n                fontWeight: \"500\",\n                color: \"#5E5873\",\n                textAlign: \"left\"\n              },\n              children: \"Spreading History\"\n            }), /*#__PURE__*/_jsx(\"div\", {\n              style: {\n                margin: \"22px 0\"\n              },\n              children: renderList(\"SPREADING\", spreadingHistory)\n            }), /*#__PURE__*/_jsx(Link, {\n              href: \"/visit/spreading/history\",\n              children: /*#__PURE__*/_jsx(\"a\", {\n                children: /*#__PURE__*/_jsx(Button, {\n                  text: \"See Details\"\n                })\n              })\n            })]\n          })\n        })]\n      });\n    }\n  };\n\n  var renderUnplan = function renderUnplan() {\n    if (loading) {\n      return /*#__PURE__*/_jsx(Spinner, {});\n    } else {\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(Card, {\n          style: {\n            borderRadius: \"5px\",\n            marginTop: \"22px\"\n          },\n          shadow: true,\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.unplan_grid,\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: styles.num_total_unplan,\n              children: unplanHistory.length\n            }), /*#__PURE__*/_jsx(\"div\", {\n              style: {\n                fontSize: \"14px\"\n              },\n              children: \"Total Unplan Visit\"\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.date,\n              children: moment().format(\"MMMM\")\n            })]\n          })\n        }), /*#__PURE__*/_jsx(Card, {\n          style: {\n            borderRadius: \"5px\",\n            marginTop: \"11px\"\n          },\n          shadow: true,\n          children: /*#__PURE__*/_jsx(Link, {\n            href: \"/visit/unplan\",\n            children: /*#__PURE__*/_jsx(\"a\", {\n              style: {\n                textDecoration: \"none\"\n              },\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: styles.unplan_grid2,\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: styles.add_unplan,\n                  children: /*#__PURE__*/_jsx(\"div\", {\n                    style: {\n                      marginTop: \"-8px\"\n                    },\n                    children: \"+\"\n                  })\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  style: {\n                    fontSize: \"16px\",\n                    fontWeight: \"600\"\n                  },\n                  children: [\"Any Unplan Visit?\", /*#__PURE__*/_jsx(\"div\", {\n                    style: {\n                      color: \"#B9B9C3\",\n                      fontWeight: \"300\",\n                      fontSize: \"13px\"\n                    },\n                    children: \"Add your unplan visit here\"\n                  }), \" \"]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  style: {\n                    textAlign: \"center\"\n                  },\n                  children: /*#__PURE__*/_jsx(\"img\", {\n                    src: \"/next.svg\"\n                  })\n                })]\n              })\n            })\n          })\n        }), /*#__PURE__*/_jsx(Card, {\n          style: {\n            marginTop: \"22px\",\n            borderRadius: \"30px\"\n          },\n          shadow: true,\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.plan_container,\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              style: {\n                fontSize: \"18px\",\n                fontWeight: \"500\",\n                color: \"#5E5873\",\n                textAlign: \"left\"\n              },\n              children: \"Unplan Visit History\"\n            }), /*#__PURE__*/_jsx(\"div\", {\n              style: {\n                margin: \"22px 0\"\n              },\n              children: renderList(\"UNPLAN\", unplanHistory)\n            }), /*#__PURE__*/_jsx(Link, {\n              href: \"/visit/unplan/history\",\n              children: /*#__PURE__*/_jsx(\"a\", {\n                children: /*#__PURE__*/_jsx(Button, {\n                  text: \"See Details\"\n                })\n              })\n            })]\n          })\n        })]\n      });\n    }\n  };\n\n  var renderWorkVisit = function renderWorkVisit() {\n    if (loading) {\n      return /*#__PURE__*/_jsx(Spinner, {});\n    } else {\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(Card, {\n          style: {\n            borderRadius: \"5px\",\n            marginTop: \"22px\"\n          },\n          shadow: true,\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.overview,\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              children: [/*#__PURE__*/_jsx(\"span\", {\n                className: styles.date,\n                children: moment().format(\"D / MMM / YYYY\")\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                style: {\n                  color: \"#5E5873\",\n                  marginTop: \"7px\"\n                },\n                children: [/*#__PURE__*/_jsx(\"span\", {\n                  style: {\n                    fontSize: \"36px\",\n                    fontWeight: \"600\"\n                  },\n                  children: workVisitHistory.length\n                }), /*#__PURE__*/_jsxs(\"span\", {\n                  style: {\n                    fontSize: \"18px\"\n                  },\n                  children: [\"/\", workVisit.length + workVisitHistory.length]\n                })]\n              }), /*#__PURE__*/_jsx(\"button\", {\n                style: {\n                  marginTop: \"7px\",\n                  backgroundColor: \"#FEB800\",\n                  padding: \"10px 22px\",\n                  fontSize: \"14px\",\n                  fontWeight: \"400\",\n                  color: \"#fff\",\n                  border: \"none\",\n                  borderRadius: \"5px\"\n                },\n                children: \"Add New +\"\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: styles.pie_percentage,\n                children: workVisitHistory.length === 0 ? \"0%\" : \"\".concat(Math.round(workVisitHistory.length / (workVisit.length + workVisitHistory.length) * 100), \"%\")\n              }), /*#__PURE__*/_jsx(Doughnut, {\n                data: dataWorkVisit,\n                options: donutOptions,\n                width: 100,\n                height: 100\n              })]\n            })]\n          })\n        }), /*#__PURE__*/_jsx(Card, {\n          style: {\n            marginTop: \"22px\",\n            borderRadius: \"30px\"\n          },\n          shadow: true,\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.plan_container,\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              style: {\n                fontSize: \"18px\",\n                fontWeight: \"500\",\n                color: \"#5E5873\",\n                textAlign: \"left\"\n              },\n              children: \"Your Work Visit Today\"\n            }), /*#__PURE__*/_jsx(\"div\", {\n              style: {\n                margin: \"22px 0\"\n              },\n              children: renderListWorkVisit(workVisit)\n            }), /*#__PURE__*/_jsx(Link, {\n              href: \"/work-visit\",\n              children: /*#__PURE__*/_jsx(\"a\", {\n                children: /*#__PURE__*/_jsx(Button, {\n                  text: \"See Details\"\n                })\n              })\n            })]\n          })\n        })]\n      });\n    }\n  };\n\n  var renderProgress = function renderProgress() {\n    var renderSales = function renderSales(title, data) {\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          style: {\n            display: \"grid\",\n            gridTemplateColumns: \"1fr 2fr\"\n          },\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: styles.progress_title,\n            children: title\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.progress_number,\n            children: [data.sales.toLocaleString(\"id-ID\"), /*#__PURE__*/_jsxs(\"span\", {\n              style: {\n                fontSize: \"12px\",\n                fontWeight: \"400\"\n              },\n              children: [\" / \", data.target.toLocaleString(\"id-ID\")]\n            })]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          style: {\n            margin: \"13px 0 0 0\"\n          },\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: styles.progress_bar\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: styles.progress_bar_now,\n            style: {\n              width: \"\".concat(data.sales / data.target * 100, \"%\")\n            }\n          })]\n        })]\n      });\n    };\n\n    if (salesTarget.length !== 0 && salesTarget75.length !== 0 && produktifitas.length !== 0 && frontliner.length !== 0 && !loading && !loadingMenu) {\n      return /*#__PURE__*/_jsx(Card, {\n        style: {\n          marginTop: \"22px\",\n          borderRadius: \"6px\"\n        },\n        shadow: true,\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.plan_container,\n          children: [renderSales(\"Sales\", salesTarget), renderSales(\"Sales 75%\", salesTarget75), renderSales(\"Sales NOO\", NOO), /*#__PURE__*/_jsxs(\"div\", {\n            style: {\n              display: \"grid\",\n              gridTemplateColumns: \"1fr 1fr\"\n            },\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: styles.progress_title,\n              children: \"Frontliner\"\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.progress_number,\n              children: [frontliner.ach, /*#__PURE__*/_jsxs(\"span\", {\n                style: {\n                  fontSize: \"12px\",\n                  fontWeight: \"400\"\n                },\n                children: [\" / \", frontliner.target]\n              })]\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            style: {\n              margin: \"13px 0 0 0\"\n            },\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: styles.progress_bar\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.progress_bar_now,\n              style: {\n                width: \"\".concat(frontliner.ach / frontliner.target * 100, \"%\")\n              }\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            style: {\n              display: \"grid\",\n              gridTemplateColumns: \"1fr 1fr\"\n            },\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: styles.progress_title,\n              children: \"Produktifitas\"\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.progress_number,\n              children: [produktifitas.achievement, /*#__PURE__*/_jsxs(\"span\", {\n                style: {\n                  fontSize: \"12px\",\n                  fontWeight: \"400\"\n                },\n                children: [\" / \", produktifitas.target]\n              })]\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            style: {\n              margin: \"13px 0 0 0\"\n            },\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: styles.progress_bar\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.progress_bar_now,\n              style: {\n                width: \"\".concat(produktifitas.achievement / produktifitas.target * 100, \"%\")\n              }\n            })]\n          })]\n        })\n      });\n    }\n  };\n\n  var renderPage = function renderPage() {\n    if (loading && loadingMenu) {\n      return /*#__PURE__*/_jsx(Spinner, {});\n    } else {\n      return /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsxs(Head, {\n          children: [/*#__PURE__*/_jsx(\"title\", {\n            children: \"Home\"\n          }), /*#__PURE__*/_jsx(\"link\", {\n            rel: \"icon\",\n            href: \"/favicon.ico\"\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: styles.container,\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.wrapper,\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: styles.bg_top\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.user_info_grid,\n              children: [/*#__PURE__*/_jsx(\"img\", {\n                className: styles.pp,\n                src: \"/pp.png\"\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                style: {\n                  marginLeft: \"15px\"\n                },\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  style: {\n                    fontSize: \"14px\"\n                  },\n                  children: state.userReducer.user.name\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  style: {\n                    fontSize: \"12px\"\n                  },\n                  children: role\n                })]\n              }), /*#__PURE__*/_jsx(\"div\", {\n                children: /*#__PURE__*/_jsx(Link, {\n                  href: \"/announcement\",\n                  children: /*#__PURE__*/_jsxs(\"a\", {\n                    style: {\n                      textDecoration: \"none\"\n                    },\n                    children: [/*#__PURE__*/_jsx(\"img\", {\n                      className: styles.notif,\n                      src: \"/notif.svg\"\n                    }), notif ? /*#__PURE__*/_jsx(\"div\", {\n                      style: {\n                        position: \" relative\",\n                        top: \"-30px\",\n                        right: \"-14px\"\n                      },\n                      children: /*#__PURE__*/_jsx(\"div\", {\n                        style: {\n                          width: \"21px\",\n                          height: \"18px\",\n                          borderRadius: \"20px\",\n                          backgroundColor: \"#feb800\",\n                          position: \"relative\",\n                          color: \"white\",\n                          fontSize: \"12px\"\n                        },\n                        children: /*#__PURE__*/_jsx(\"div\", {\n                          style: {\n                            textAlign: \"center\"\n                          },\n                          children: newAnnouncement.length < 9 ? newAnnouncement.length : \"9+\"\n                        })\n                      })\n                    }) : null]\n                  })\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: styles.main,\n                children: [renderTopMenu(), focus === \"PLAN\" ? renderPlan() : focus === \"UNPLAN\" ? renderUnplan() : focus === \"SPREADING\" ? renderSpreading() : focus === \"WORK-VISIT\" ? renderWorkVisit() : \"\", renderProgress(), /*#__PURE__*/_jsx(\"div\", {\n                  style: {\n                    marginBottom: \"120px\"\n                  }\n                })]\n              })]\n            })]\n          })\n        }), /*#__PURE__*/_jsx(BotNav, {})]\n      });\n    }\n  };\n\n  return renderPage();\n}","map":null,"metadata":{},"sourceType":"module"}