{"ast":null,"code":"import { TOKEN, API_URL, API_USER, API_MASTER, API_VISIT_PLAN, API_VISIT_UNPLAN, API_VISIT_SPREADING, API_WORK_VISIT } from \"./constant\";\nvar now = new Date();\nvar date = now.getDate();\nvar month = now.getMonth() + 1;\nvar year = now.getFullYear();\n\nfunction compare(a, b) {\n  if (a.nomor < b.nomor) {\n    return -1;\n  }\n\n  if (a.nomor > b.nomor) {\n    return 1;\n  }\n\n  return 0;\n} // USER =============================================================================================================================\n\n\nconst getMenu = userData => {\n  return fetch(API_URL + API_USER + `/User/GetMenu?username=${userData.email}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getAuth = userData => {\n  return fetch(API_URL + API_USER + `/User/GetAuthorize?username=${userData.username}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst onLogin = values => {\n  return fetch(API_URL + API_USER + `/User/Login?username=${values.username}&&password=${values.password}`, {\n    method: \"POST\",\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    return data;\n  }).catch(err => {\n    console.log(err);\n    setWrongUser(true);\n  });\n}; // MASTER ============================================================================================================================\n\n\nconst getPosm = () => {\n  return fetch(API_URL + API_MASTER + `/MasterDataLokal/GetAllDisplayProgram`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getProductSearch = search => {\n  return fetch(API_URL + API_MASTER + `/MasterData/GetProdukLike/${search}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getProductByJenisChannel = jenisChannelId => {\n  return fetch(API_URL + API_MASTER + `/MasterDataLokal/GetProdukJenisChannelBy/${jenisChannelId}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getProductAvgSales = (productCode, outletCode) => {\n  return fetch(API_URL + API_MASTER + `/MasterData/GetAvgSales30DaysByOutletAndProduct?productCode=${productCode}&outletCode=${outletCode}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getSearchJenisChannel = search => {\n  return fetch(API_URL + API_MASTER + `/MasterData/GetJenisChannelLike?teks=${search}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getSearchOutlet = search => {\n  return fetch(API_URL + API_MASTER + `/MasterData/GetOutletLike?teks=${search}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getBrand = search => {\n  return fetch(API_URL + API_MASTER + `/MasterDataLokal/GetAllBrand`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getKontenWorkVisit = () => {\n  return fetch(API_URL + API_MASTER + `/MasterDataLokal/GetAllKontenWorkVisit`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n}; // VISIT PLAN ======================================================================================================================\n\n\nconst getPlanList = userData => {\n  return fetch(API_URL + API_VISIT_PLAN + `/ActivityVisitPlan/GetActivityVisitPlanBy?username=${userData.username}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    var res = data.filter(val => {\n      return val.isCheckOut === false;\n    });\n    return res;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getPlanId = id => {\n  return fetch(API_URL + API_VISIT_PLAN + `/MasterVisitPlan/GetMasterVisitPlanBy?parameter=${year}-${month}-${date}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(planList => {\n    if (planList.length != 0) {\n      return fetch(API_URL + API_VISIT_PLAN + `/MasterVisitPlan/GetMasterVisitPlanById/${id}`, {\n        headers: {\n          apiKey: TOKEN\n        }\n      }).then(response => {\n        return response.json();\n      }).then(data => {\n        var samePlan = planList.filter(val => {\n          return val.id === data.id;\n        });\n        return {\n          samePlan,\n          data\n        };\n      }).catch(err => {\n        console.log(err);\n      });\n    } else {\n      return planList;\n    }\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getPlanHistory = userData => {\n  return fetch(API_URL + API_VISIT_PLAN + `/ActivityVisitPlan/GetActivityVisitPlanBy?username=${userData.username}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    var res = data.filter(val => {\n      return val.isCheckOut === true;\n    });\n    return res;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst submitVisitPlan = data => {\n  // console.log(data);\n  return fetch(API_URL + API_VISIT_PLAN + \"/ActivityVisitPlan/SaveAllActivityVisitPlan\", {\n    method: \"POST\",\n    headers: {\n      apiKey: TOKEN,\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(data)\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    console.log(\"baikan saveall\", data);\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst submitVisitPlanDposm = (dposm, file) => {\n  // console.log(dposm, file);\n  const formdata = new FormData();\n  return fetch(API_URL + API_VISIT_PLAN + \"/ActivityVisitPlanDPOSM/SaveActivityVisitPlanDposm\", {\n    method: \"POST\",\n    headers: {\n      apiKey: TOKEN,\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(dposm)\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    // console.log(\"balikan psom\", data);\n    formdata.append(\"file\", file);\n    return fetch(API_URL + API_VISIT_PLAN + `/ActivityVisitPlanDPOSM/InsertFileBy?id=${data.id}&namaFile=${data.namaFile}`, {\n      method: \"POST\",\n      headers: {\n        apiKey: TOKEN\n      },\n      body: formdata\n    }).then(response => {\n      return response.json();\n    }).then(data => {\n      console.log(\"balikan inserfile\", data);\n      return data;\n    }).catch(err => {\n      console.log(err);\n    });\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getInvoiceData = visitPlanId => {\n  return fetch(API_URL + API_VISIT_PLAN + `/ActivityVisitPlan/GetProdukSuratPesanan/${visitPlanId}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getInvoiceDataPosm = visitPlanId => {\n  return fetch(API_URL + API_VISIT_PLAN + `/ActivityVisitPlanDPOSM/GetActivityVisitPlanDPosmBy/${visitPlanId}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    var sortData = data.sort(compare);\n    return sortData;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst viewFile = id => {\n  return fetch(API_URL + API_VISIT_PLAN + `/ActivityVisitPlanDPOSM/ViewFile/${id}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.blob();\n  }).then(function (data) {\n    var outside = URL.createObjectURL(data);\n    return outside;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getPlanMonthlyHistory = userData => {\n  return fetch(API_URL + API_VISIT_PLAN + `/ActivityVisitPlan/GetHistoryActivityVisitPlanBy?username=${userData.username}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    data.sort(function (a, b) {\n      var dateA = new Date(a.tanggal),\n          dateB = new Date(b.tanggal);\n      return dateB - dateA;\n    });\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n}; // VISIT UNPLAN =================================================================================================================\n\n\nconst submitVisitUnplan = data => {\n  // console.log(data);\n  return fetch(API_URL + API_VISIT_UNPLAN + `/SakamorActivityVisitUnPlan/SaveAllActivityVisitUnPlan`, {\n    method: \"POST\",\n    headers: {\n      apiKey: TOKEN,\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(data)\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    console.log(\"baikan saveall\", data);\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst submitVisitUnplanDposm = (dposm, file) => {\n  // console.log(dposm, file);\n  const formdata = new FormData();\n  return fetch(API_URL + API_VISIT_UNPLAN + `/SakamorActivityVisitUnPlanDPOSM/SaveActivityVisitUnPlanDposm`, {\n    method: \"POST\",\n    headers: {\n      apiKey: TOKEN,\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(dposm)\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    console.log(\"balikan psom\", data);\n    formdata.append(\"file\", file);\n    return fetch(API_URL + API_VISIT_UNPLAN + `/SakamorActivityVisitUnPlanDPOSM/InsertFileBy?id=${data.id}&namaFile=${data.namaFile}`, {\n      method: \"POST\",\n      headers: {\n        apiKey: TOKEN\n      },\n      body: formdata\n    }).then(response => {\n      return response.json();\n    }).then(data => {\n      console.log(\"balikan inserfile\", data);\n      return data;\n    }).catch(err => {\n      console.log(err);\n    });\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getInvoiceDataUnplan = visitPlanId => {\n  return fetch(API_URL + API_VISIT_UNPLAN + `/SakamorActivityVisitUnPlan/GetProdukSuratPesanan/${visitPlanId}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getInvoiceDataPosmUnplan = visitUnplanId => {\n  return fetch(API_URL + API_VISIT_UNPLAN + `/SakamorActivityVisitUnPlanDPOSM/GetActivityVisitUnPlanDPosmBy/${visitUnplanId}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    var sortData = data.sort(compare);\n    return sortData;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst viewFileUnplan = id => {\n  console.log(id);\n  return fetch(API_URL + API_VISIT_UNPLAN + `/SakamorActivityVisitUnPlanDPOSM/ViewFile/${id}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.blob();\n  }).then(function (data) {\n    var outside = URL.createObjectURL(data);\n    return outside;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getUnplanMonthlyHistory = userData => {\n  return fetch(API_URL + API_VISIT_UNPLAN + `/SakamorActivityVisitUnPlan/GetHistoryActivityVisitUnPlanBy?username=${userData.username}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    data.sort(function (a, b) {\n      var dateA = new Date(a.tanggal),\n          dateB = new Date(b.tanggal);\n      return dateB - dateA;\n    });\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getUnplanNearMe = () => {\n  return fetch(API_URL + API_MASTER + `/MasterData/GetOutletNearMe/-6.123456/12.987654`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n}; // SPREADING =======================================================================================================================\n\n\nconst submitVisitSpreading = data => {\n  // console.log(data);\n  return fetch(API_URL + API_VISIT_SPREADING + `/ActivitySpreading/SaveAllActivitySpreading`, {\n    method: \"POST\",\n    headers: {\n      apiKey: TOKEN,\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(data)\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    console.log(\"baikan saveall\", data);\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst submitVisitSpreadingDposm = (dposm, file) => {\n  // console.log(dposm, file);\n  const formdata = new FormData();\n  return fetch(API_URL + API_VISIT_SPREADING + `/ActivitySpreadingDPOSM/SaveActivitySpreadingDposm`, {\n    method: \"POST\",\n    headers: {\n      apiKey: TOKEN,\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(dposm)\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    console.log(\"balikan psom\", data);\n    formdata.append(\"file\", file);\n    return fetch(API_URL + API_VISIT_SPREADING + `/ActivitySpreadingDPOSM/InsertFileBy?id=${data.id}&namaFile=${data.namaFile}`, {\n      method: \"POST\",\n      headers: {\n        apiKey: TOKEN\n      },\n      body: formdata\n    }).then(response => {\n      return response.json();\n    }).then(data => {\n      console.log(\"balikan inserfile\", data);\n      return data;\n    }).catch(err => {\n      console.log(err);\n    });\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getInvoiceDataSpreading = visitPlanId => {\n  return fetch(API_URL + API_VISIT_SPREADING + `/ActivitySpreading/GetProdukSuratPesanan/${visitPlanId}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getInvoiceDataPosmSpreading = visitUnplanId => {\n  return fetch(API_URL + API_VISIT_SPREADING + `/ActivitySpreadingDPOSM/GetActivityVisitUnPlanDPosmBy/${visitUnplanId}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    var sortData = data.sort(compare);\n    return sortData;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst viewFileSpreading = id => {\n  return fetch(API_URL + API_VISIT_SPREADING + `/ActivitySpreadingDPOSM/ViewFile/${id}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.blob();\n  }).then(function (data) {\n    var outside = URL.createObjectURL(data);\n    return outside;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getSpreadingMonthlyHistory = userData => {\n  return fetch(API_URL + API_VISIT_SPREADING + `/ActivitySpreading/GetHistoryActivitySpreadingBy?username=${userData.username}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    data.sort(function (a, b) {\n      var dateA = new Date(a.tanggal),\n          dateB = new Date(b.tanggal);\n      return dateB - dateA;\n    });\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n}; // WORK VISIT ================================================================================================================================\n\n\nconst getAllWorkVisit = userData => {\n  return fetch(API_URL + API_WORK_VISIT + `/ActivityWorkVisit/GetActivityWorkVisitBy?username=${userData.username}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    console.log(data);\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getWorkVisitMonthlyHistory = userData => {\n  return fetch(API_URL + API_WORK_VISIT + `/ActivityWorkVisit/GetHistoryActivityWorkVisitBy?username=${userData.username}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    data.sort(function (a, b) {\n      var dateA = new Date(a.tanggal),\n          dateB = new Date(b.tanggal);\n      return dateB - dateA;\n    });\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst getWorkVisitRating = id => {\n  return fetch(API_URL + API_WORK_VISIT + `/ActivityWorkVisitRating/GetActivityWorkVisitRatingBy/${id}`, {\n    headers: {\n      apiKey: TOKEN\n    }\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst submitWorkVisit = data => {\n  // console.log(data);\n  return fetch(API_URL + API_WORK_VISIT + \"/ActivityWorkVisit/SaveAllActivityWorkVisit\", {\n    method: \"POST\",\n    headers: {\n      apiKey: TOKEN,\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(data)\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    console.log(\"baikan saveall\", data);\n    return data;\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nexport { getMenu, getAuth, onLogin, getProductSearch, getSearchJenisChannel, getProductAvgSales, getSearchOutlet, getBrand, getProductByJenisChannel, getKontenWorkVisit, getPlanList, getPlanId, getPosm, getPlanHistory, submitVisitPlan, submitVisitPlanDposm, getInvoiceDataPosm, getInvoiceData, getPlanMonthlyHistory, viewFile, submitVisitUnplan, submitVisitUnplanDposm, getInvoiceDataUnplan, getInvoiceDataPosmUnplan, getUnplanMonthlyHistory, viewFileUnplan, getUnplanNearMe, submitVisitSpreading, submitVisitSpreadingDposm, getInvoiceDataSpreading, getInvoiceDataPosmSpreading, viewFileSpreading, getSpreadingMonthlyHistory, getAllWorkVisit, getWorkVisitMonthlyHistory, getWorkVisitRating, submitWorkVisit };","map":null,"metadata":{},"sourceType":"module"}