{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[61],{bGjZ:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/work-visit/[id]\",function(){return n(\"dadD\")}])},dadD:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"default\",(function(){return g}));var a=n(\"nKUr\"),i=n(\"rePB\"),r=n(\"q1tI\"),c=(n(\"YFqc\"),n(\"20a2\")),s=n.n(c),o=n(\"29p6\"),u=n.n(o),d=n(\"kQFM\"),l=n(\"JkA1\"),j=n(\"5PhN\"),b=n(\"fj1f\"),O=n(\"es2X\"),p=n(\"UV+Q\"),f=n(\"Yue9\"),h=n(\"ECGM\");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(){var e=Object(r.useContext)(d.b),t=(e.state,e.dispatch),n=e.actions,i=Object(r.useState)(!0),o=i[0],x=i[1],g=Object(r.useState)([]),k=g[0],y=g[1],v=Object(r.useState)([]),w=v[0],S=v[1],_=Object(r.useState)(!0),N=_[0],P=_[1],E=Object(r.useState)(!1),R=E[0],M=E[1],V=Object(c.useRouter)(),D=new Date;Object(r.useEffect)((function(){if(V.query.id){var e=JSON.parse(localStorage.getItem(\"user\"));Object(h.c)(e).then((function(e){var t=e.filter((function(e){return e.idMasterPlan===V.query.id}));y(t),x(!1)})).catch((function(e){console.log(e)}))}}),[V.query.id]),Object(r.useEffect)((function(){Object(h.r)().then((function(e){S(e),P(!1)})).catch((function(e){console.log(e)}))}),[t]);var F=function(){var e=k[0];if(e)return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(j.a,{style:{borderRadius:\"5px\",padding:\"16px\"},shadow:!0,children:[Object(a.jsxs)(\"div\",{className:u.a.data_container,children:[Object(a.jsx)(\"div\",{children:e.namaSMR}),Object(a.jsx)(\"div\",{style:{textAlign:\"right\"},children:Object(a.jsx)(\"span\",{className:u.a.rayon_container,children:e.kodeRayon})})]}),Object(a.jsxs)(\"div\",{style:{fontSize:\"12px\",fontWeight:\"400\",margin:\"8px 0 0 0 \"},children:[\"Produk Fokus:\",\" \",Object(a.jsx)(\"span\",{className:u.a.produk_fokus_container,children:e.produkFokus})]})]}),w.map((function(e,t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(\"div\",{className:u.a.penilaian_top_container,children:e.namaKonten}),Object(a.jsxs)(\"div\",{className:u.a.penilaian_bot_container,children:[Object(a.jsxs)(\"div\",{className:u.a.nilai_container,children:[Object(a.jsx)(\"div\",{children:\"Nilai\"}),Object(a.jsx)(f.a,{options:[\"SELECT\",1,2,3,4,5],type:\"NILAI_WORKVISIT\",onChange:function(e){w.splice(t,1,m(m({},w[t]),{},{nilai:parseInt(e.target.value)}))}})]}),Object(a.jsxs)(\"div\",{children:[Object(a.jsx)(\"div\",{children:\"Catatan\"}),Object(a.jsx)(\"textarea\",{style:{width:\"100%\",height:\"80px\",fontSize:\"12px\",border:\"1px solid #e9ecf2\",borderRadius:\"5px\"},onChange:function(e){w.splice(t,1,m(m({},w[t]),{},{catatan:e.target.value}))}})]})]})]})}))]})};return o||N?Object(a.jsx)(b.a,{}):Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(\"div\",{className:u.a.container,children:[R?Object(a.jsx)(p.a,{children:Object(a.jsx)(b.a,{})}):null,Object(a.jsxs)(\"div\",{className:u.a.wrapper,children:[Object(a.jsx)(l.a,{title:\"Work Visit\",color:\"white\",action:\"Submit\",backAction:function(){confirm(\"Data will be lost if you leave the page, are you sure?\")&&(n.setDefaultVisitUnplan(),s.a.push(\"/work-visit\"))}}),Object(a.jsx)(\"div\",{className:u.a.main,children:F()}),Object(a.jsx)(\"div\",{className:u.a.bottom_container,children:Object(a.jsx)(O.a,{onClick:function(){!function(){if(w.filter((function(e){return e.nilai})).length===w.length){M(!0);var e=JSON.parse(localStorage.getItem(\"user\")),t=k[0],n=w.map((function(n){return{id:n.id,idActivityWorkVisit:t.idWorkVisit,idMasterKontenWorkVisit:n.id,rating:n.nilai,catatan:n.catatan?n.catatan:\"\",createdby:e.username,updatedBy:e.username,namaKonten:n.namaKonten}})),a={workVisit:{id:t.idWorkVisit,idMasterPlanWorkVisit:t.idMasterPlan,namaSMR:t.namaSMR,usernameSMR:t.usernameSMR,kodeRayon:t.kodeRayon,rayon:t.rayon,kodeProduk:t.kodeProduk,produkFokus:t.produkFokus,isPenilaian:!0,tanggalPenilaian:D.toISOString(),createdBy:e.username,updatedBy:e.username},rating:n}}Object(h.X)(a).then((function(e){M(!1),s.a.push(\"/\")})).catch((function(e){console.log(e)}))}()},text:\"Submit\"})})]})]})})}}},[[\"bGjZ\",0,2,3,1,4,5,16]]]);","map":{"version":3,"sources":["static/chunks/pages/work-visit/[id]-253c40da3e408d13f243.js"],"names":["_N_E","window","push","bGjZ","module","exports","__webpack_require__","__NEXT_P","dadD","__webpack_exports__","r","d","index","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","C_Users_Rico_Desktop_Home_Kalbe_app_sakamor_new_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_2__","next_router__WEBPACK_IMPORTED_MODULE_4__","next_router__WEBPACK_IMPORTED_MODULE_4___default","n","_styles_pages_WorkVisitDetail_module_css__WEBPACK_IMPORTED_MODULE_5__","_styles_pages_WorkVisitDetail_module_css__WEBPACK_IMPORTED_MODULE_5___default","_store__WEBPACK_IMPORTED_MODULE_6__","_components_Nav__WEBPACK_IMPORTED_MODULE_7__","_components_Card__WEBPACK_IMPORTED_MODULE_8__","_components_Spinner__WEBPACK_IMPORTED_MODULE_9__","_components_Button__WEBPACK_IMPORTED_MODULE_10__","_components_Modal__WEBPACK_IMPORTED_MODULE_11__","_components_Dropdown__WEBPACK_IMPORTED_MODULE_12__","_helper__WEBPACK_IMPORTED_MODULE_13__","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_useContext","dispatch","state","actions","_useState","loading","setLoading","_useState2","workVisit","setWorkVisit","_useState3","konten","setKonten","_useState4","loadingKonten","setLoadingKonten","_useState5","loadingSubmit","setLoadingSubmit","router","now","Date","query","id","userData","JSON","parse","localStorage","getItem","then","res","result","val","idMasterPlan","err","console","log","renderDetail","data","children","style","borderRadius","padding","shadow","className","a","data_container","namaSMR","textAlign","rayon_container","kodeRayon","fontSize","fontWeight","margin","produk_fokus_container","produkFokus","map","penilaian_top_container","namaKonten","penilaian_bot_container","nilai_container","options","type","onChange","e","splice","nilai","parseInt","value","width","height","border","catatan","container","wrapper","title","color","action","backAction","confirm","setDefaultVisitUnplan","main","bottom_container","onClick","workVisitFocus","dataKonten","idActivityWorkVisit","idWorkVisit","idMasterKontenWorkVisit","rating","createdby","username","updatedBy","idMasterPlanWorkVisit","usernameSMR","rayon","kodeProduk","isPenilaian","tanggalPenilaian","toISOString","createdBy","onSubmit","text"],"mappings":"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"},"name":"static/chunks/pages/work-visit/[id]-253c40da3e408d13f243.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[61],{\n\n/***/ \"bGjZ\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/work-visit/[id]\",\n      function () {\n        return __webpack_require__(\"dadD\");\n      }\n    ]);\n  \n\n/***/ }),\n\n/***/ \"dadD\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return index; });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var C_Users_Rico_Desktop_Home_Kalbe_app_sakamor_new_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"rePB\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"YFqc\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _styles_pages_WorkVisitDetail_module_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"29p6\");\n/* harmony import */ var _styles_pages_WorkVisitDetail_module_css__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_styles_pages_WorkVisitDetail_module_css__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _store__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"kQFM\");\n/* harmony import */ var _components_Nav__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"JkA1\");\n/* harmony import */ var _components_Card__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"5PhN\");\n/* harmony import */ var _components_Spinner__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"fj1f\");\n/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"es2X\");\n/* harmony import */ var _components_Modal__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"UV+Q\");\n/* harmony import */ var _components_Dropdown__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"Yue9\");\n/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"ECGM\");\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(C_Users_Rico_Desktop_Home_Kalbe_app_sakamor_new_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction index() {\n  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useContext\"])(_store__WEBPACK_IMPORTED_MODULE_6__[/* Stores */ \"b\"]),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch,\n      actions = _useContext.actions;\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(true),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])([]),\n      workVisit = _useState2[0],\n      setWorkVisit = _useState2[1];\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])([]),\n      konten = _useState3[0],\n      setKonten = _useState3[1];\n\n  var _useState4 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(true),\n      loadingKonten = _useState4[0],\n      setLoadingKonten = _useState4[1];\n\n  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(false),\n      loadingSubmit = _useState5[0],\n      setLoadingSubmit = _useState5[1];\n\n  var router = Object(next_router__WEBPACK_IMPORTED_MODULE_4__[\"useRouter\"])();\n  var now = new Date();\n  Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"])(function () {\n    if (router.query.id) {\n      var userData = JSON.parse(localStorage.getItem(\"user\"));\n      Object(_helper__WEBPACK_IMPORTED_MODULE_13__[/* getAllWorkVisit */ \"c\"])(userData).then(function (res) {\n        var result = res.filter(function (val) {\n          return val.idMasterPlan === router.query.id;\n        });\n        setWorkVisit(result);\n        setLoading(false);\n      })[\"catch\"](function (err) {\n        console.log(err);\n      });\n    }\n  }, [router.query.id]);\n  Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"])(function () {\n    Object(_helper__WEBPACK_IMPORTED_MODULE_13__[/* getKontenWorkVisit */ \"r\"])().then(function (res) {\n      setKonten(res);\n      setLoadingKonten(false);\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  }, [dispatch]);\n\n  var renderPenilaian = function renderPenilaian() {\n    var res = konten.map(function (val, index) {\n      return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], {\n        children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n          className: _styles_pages_WorkVisitDetail_module_css__WEBPACK_IMPORTED_MODULE_5___default.a.penilaian_top_container,\n          children: val.namaKonten\n        }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n          className: _styles_pages_WorkVisitDetail_module_css__WEBPACK_IMPORTED_MODULE_5___default.a.penilaian_bot_container,\n          children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n            className: _styles_pages_WorkVisitDetail_module_css__WEBPACK_IMPORTED_MODULE_5___default.a.nilai_container,\n            children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n              children: \"Nilai\"\n            }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_components_Dropdown__WEBPACK_IMPORTED_MODULE_12__[/* default */ \"a\"], {\n              options: [\"SELECT\", 1, 2, 3, 4, 5],\n              type: \"NILAI_WORKVISIT\",\n              onChange: function onChange(e) {\n                konten.splice(index, 1, _objectSpread(_objectSpread({}, konten[index]), {}, {\n                  nilai: parseInt(e.target.value)\n                }));\n              }\n            })]\n          }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n            children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n              children: \"Catatan\"\n            }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"textarea\", {\n              style: {\n                width: \"100%\",\n                height: \"80px\",\n                fontSize: \"12px\",\n                border: \"1px solid #e9ecf2\",\n                borderRadius: \"5px\"\n              },\n              onChange: function onChange(e) {\n                konten.splice(index, 1, _objectSpread(_objectSpread({}, konten[index]), {}, {\n                  catatan: e.target.value\n                }));\n              }\n            })]\n          })]\n        })]\n      });\n    });\n    return res;\n  };\n\n  var onSubmit = function onSubmit() {\n    var dataNilai = konten.filter(function (val) {\n      return val.nilai;\n    });\n\n    if (dataNilai.length === konten.length) {\n      setLoadingSubmit(true);\n      var userData = JSON.parse(localStorage.getItem(\"user\"));\n      var workVisitFocus = workVisit[0];\n      var dataKonten = konten.map(function (val) {\n        return {\n          id: val.id,\n          idActivityWorkVisit: workVisitFocus.idWorkVisit,\n          idMasterKontenWorkVisit: val.id,\n          rating: val.nilai,\n          catatan: val.catatan ? val.catatan : \"\",\n          createdby: userData.username,\n          updatedBy: userData.username,\n          namaKonten: val.namaKonten\n        };\n      });\n      var data = {\n        workVisit: {\n          id: workVisitFocus.idWorkVisit,\n          idMasterPlanWorkVisit: workVisitFocus.idMasterPlan,\n          namaSMR: workVisitFocus.namaSMR,\n          usernameSMR: workVisitFocus.usernameSMR,\n          kodeRayon: workVisitFocus.kodeRayon,\n          rayon: workVisitFocus.rayon,\n          kodeProduk: workVisitFocus.kodeProduk,\n          produkFokus: workVisitFocus.produkFokus,\n          isPenilaian: true,\n          tanggalPenilaian: now.toISOString(),\n          createdBy: userData.username,\n          updatedBy: userData.username\n        },\n        rating: dataKonten\n      };\n    }\n\n    Object(_helper__WEBPACK_IMPORTED_MODULE_13__[/* submitWorkVisit */ \"X\"])(data).then(function (res) {\n      setLoadingSubmit(false);\n      next_router__WEBPACK_IMPORTED_MODULE_4___default.a.push(\"/\");\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  };\n\n  var renderDetail = function renderDetail() {\n    var data = workVisit[0];\n\n    if (data) {\n      return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], {\n        children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(_components_Card__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"], {\n          style: {\n            borderRadius: \"5px\",\n            padding: \"16px\"\n          },\n          shadow: true,\n          children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n            className: _styles_pages_WorkVisitDetail_module_css__WEBPACK_IMPORTED_MODULE_5___default.a.data_container,\n            children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n              children: data.namaSMR\n            }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n              style: {\n                textAlign: \"right\"\n              },\n              children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"span\", {\n                className: _styles_pages_WorkVisitDetail_module_css__WEBPACK_IMPORTED_MODULE_5___default.a.rayon_container,\n                children: data.kodeRayon\n              })\n            })]\n          }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n            style: {\n              fontSize: \"12px\",\n              fontWeight: \"400\",\n              margin: \"8px 0 0 0 \"\n            },\n            children: [\"Produk Fokus:\", \" \", /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"span\", {\n              className: _styles_pages_WorkVisitDetail_module_css__WEBPACK_IMPORTED_MODULE_5___default.a.produk_fokus_container,\n              children: data.produkFokus\n            })]\n          })]\n        }), renderPenilaian()]\n      });\n    }\n  };\n\n  var render = function render() {\n    if (loading || loadingKonten) {\n      return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_components_Spinner__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"], {});\n    } else {\n      return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], {\n        children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n          className: _styles_pages_WorkVisitDetail_module_css__WEBPACK_IMPORTED_MODULE_5___default.a.container,\n          children: [loadingSubmit ? /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_components_Modal__WEBPACK_IMPORTED_MODULE_11__[/* default */ \"a\"], {\n            children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_components_Spinner__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"], {})\n          }) : null, /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n            className: _styles_pages_WorkVisitDetail_module_css__WEBPACK_IMPORTED_MODULE_5___default.a.wrapper,\n            children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_components_Nav__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"], {\n              title: \"Work Visit\",\n              color: \"white\",\n              action: \"Submit\",\n              backAction: function backAction() {\n                if (confirm(\"Data will be lost if you leave the page, are you sure?\")) {\n                  actions.setDefaultVisitUnplan();\n                  next_router__WEBPACK_IMPORTED_MODULE_4___default.a.push(\"/work-visit\");\n                }\n              }\n            }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n              className: _styles_pages_WorkVisitDetail_module_css__WEBPACK_IMPORTED_MODULE_5___default.a.main,\n              children: renderDetail()\n            }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n              className: _styles_pages_WorkVisitDetail_module_css__WEBPACK_IMPORTED_MODULE_5___default.a.bottom_container,\n              children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_components_Button__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"], {\n                onClick: function onClick() {\n                  onSubmit();\n                },\n                text: \"Submit\"\n              })\n            })]\n          })]\n        })\n      });\n    }\n  };\n\n  return render();\n}\n\n/***/ })\n\n},[[\"bGjZ\",0,2,3,1,4,5,16]]]);","inputSourceMap":{"version":3,"sources":["C:\\Users\\Rico\\Desktop\\Home\\Kalbe app\\sakamor-new\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-client-pages-loader.js?page=%2Fwork-visit%2F%5Bid%5D&absolutePagePath=private-next-pages%2Fwork-visit%2F%5Bid%5D%2Findex.jsx!","C:\\Users\\Rico\\Desktop\\Home\\Kalbe app\\sakamor-new\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\Rico\\Desktop\\Home\\Kalbe app\\sakamor-new\\pages\\work-visit\\[id]\\index.jsx"],"names":[],"mappings":"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","file":"x","sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/work-visit/[id]\",\n      function () {\n        return require(\"private-next-pages/work-visit/[id]/index.jsx\");\n      }\n    ]);\n  ","import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _defineProperty from \"C:/Users/Rico/Desktop/Home/Kalbe app/sakamor-new/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport Link from \"next/link\";\nimport Router, { useRouter } from \"next/router\";\nimport styles from \"../../../styles/pages/WorkVisitDetail.module.css\";\nimport { Stores } from \"../../../store\";\nimport Nav from \"../../../components/Nav\";\nimport Card from \"../../../components/Card\";\nimport Spinner from \"../../../components/Spinner\";\nimport Button from \"../../../components/Button\";\nimport Modal from \"../../../components/Modal\";\nimport Dropdown from \"../../../components/Dropdown\";\nimport { getAllWorkVisit, getKontenWorkVisit, submitWorkVisit } from \"../../../helper\";\nexport default function index() {\n  var _useContext = useContext(Stores),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch,\n      actions = _useContext.actions;\n\n  var _useState = useState(true),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = useState([]),\n      workVisit = _useState2[0],\n      setWorkVisit = _useState2[1];\n\n  var _useState3 = useState([]),\n      konten = _useState3[0],\n      setKonten = _useState3[1];\n\n  var _useState4 = useState(true),\n      loadingKonten = _useState4[0],\n      setLoadingKonten = _useState4[1];\n\n  var _useState5 = useState(false),\n      loadingSubmit = _useState5[0],\n      setLoadingSubmit = _useState5[1];\n\n  var router = useRouter();\n  var now = new Date();\n  useEffect(function () {\n    if (router.query.id) {\n      var userData = JSON.parse(localStorage.getItem(\"user\"));\n      getAllWorkVisit(userData).then(function (res) {\n        var result = res.filter(function (val) {\n          return val.idMasterPlan === router.query.id;\n        });\n        setWorkVisit(result);\n        setLoading(false);\n      })[\"catch\"](function (err) {\n        console.log(err);\n      });\n    }\n  }, [router.query.id]);\n  useEffect(function () {\n    getKontenWorkVisit().then(function (res) {\n      setKonten(res);\n      setLoadingKonten(false);\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  }, [dispatch]);\n\n  var renderPenilaian = function renderPenilaian() {\n    var res = konten.map(function (val, index) {\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: styles.penilaian_top_container,\n          children: val.namaKonten\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.penilaian_bot_container,\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: styles.nilai_container,\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              children: \"Nilai\"\n            }), /*#__PURE__*/_jsx(Dropdown, {\n              options: [\"SELECT\", 1, 2, 3, 4, 5],\n              type: \"NILAI_WORKVISIT\",\n              onChange: function onChange(e) {\n                konten.splice(index, 1, _objectSpread(_objectSpread({}, konten[index]), {}, {\n                  nilai: parseInt(e.target.value)\n                }));\n              }\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              children: \"Catatan\"\n            }), /*#__PURE__*/_jsx(\"textarea\", {\n              style: {\n                width: \"100%\",\n                height: \"80px\",\n                fontSize: \"12px\",\n                border: \"1px solid #e9ecf2\",\n                borderRadius: \"5px\"\n              },\n              onChange: function onChange(e) {\n                konten.splice(index, 1, _objectSpread(_objectSpread({}, konten[index]), {}, {\n                  catatan: e.target.value\n                }));\n              }\n            })]\n          })]\n        })]\n      });\n    });\n    return res;\n  };\n\n  var onSubmit = function onSubmit() {\n    var dataNilai = konten.filter(function (val) {\n      return val.nilai;\n    });\n\n    if (dataNilai.length === konten.length) {\n      setLoadingSubmit(true);\n      var userData = JSON.parse(localStorage.getItem(\"user\"));\n      var workVisitFocus = workVisit[0];\n      var dataKonten = konten.map(function (val) {\n        return {\n          id: val.id,\n          idActivityWorkVisit: workVisitFocus.idWorkVisit,\n          idMasterKontenWorkVisit: val.id,\n          rating: val.nilai,\n          catatan: val.catatan ? val.catatan : \"\",\n          createdby: userData.username,\n          updatedBy: userData.username,\n          namaKonten: val.namaKonten\n        };\n      });\n      var data = {\n        workVisit: {\n          id: workVisitFocus.idWorkVisit,\n          idMasterPlanWorkVisit: workVisitFocus.idMasterPlan,\n          namaSMR: workVisitFocus.namaSMR,\n          usernameSMR: workVisitFocus.usernameSMR,\n          kodeRayon: workVisitFocus.kodeRayon,\n          rayon: workVisitFocus.rayon,\n          kodeProduk: workVisitFocus.kodeProduk,\n          produkFokus: workVisitFocus.produkFokus,\n          isPenilaian: true,\n          tanggalPenilaian: now.toISOString(),\n          createdBy: userData.username,\n          updatedBy: userData.username\n        },\n        rating: dataKonten\n      };\n    }\n\n    submitWorkVisit(data).then(function (res) {\n      setLoadingSubmit(false);\n      Router.push(\"/\");\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  };\n\n  var renderDetail = function renderDetail() {\n    var data = workVisit[0];\n\n    if (data) {\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsxs(Card, {\n          style: {\n            borderRadius: \"5px\",\n            padding: \"16px\"\n          },\n          shadow: true,\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: styles.data_container,\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              children: data.namaSMR\n            }), /*#__PURE__*/_jsx(\"div\", {\n              style: {\n                textAlign: \"right\"\n              },\n              children: /*#__PURE__*/_jsx(\"span\", {\n                className: styles.rayon_container,\n                children: data.kodeRayon\n              })\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            style: {\n              fontSize: \"12px\",\n              fontWeight: \"400\",\n              margin: \"8px 0 0 0 \"\n            },\n            children: [\"Produk Fokus:\", \" \", /*#__PURE__*/_jsx(\"span\", {\n              className: styles.produk_fokus_container,\n              children: data.produkFokus\n            })]\n          })]\n        }), renderPenilaian()]\n      });\n    }\n  };\n\n  var render = function render() {\n    if (loading || loadingKonten) {\n      return /*#__PURE__*/_jsx(Spinner, {});\n    } else {\n      return /*#__PURE__*/_jsx(_Fragment, {\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.container,\n          children: [loadingSubmit ? /*#__PURE__*/_jsx(Modal, {\n            children: /*#__PURE__*/_jsx(Spinner, {})\n          }) : null, /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.wrapper,\n            children: [/*#__PURE__*/_jsx(Nav, {\n              title: \"Work Visit\",\n              color: \"white\",\n              action: \"Submit\",\n              backAction: function backAction() {\n                if (confirm(\"Data will be lost if you leave the page, are you sure?\")) {\n                  actions.setDefaultVisitUnplan();\n                  Router.push(\"/work-visit\");\n                }\n              }\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.main,\n              children: renderDetail()\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.bottom_container,\n              children: /*#__PURE__*/_jsx(Button, {\n                onClick: function onClick() {\n                  onSubmit();\n                },\n                text: \"Submit\"\n              })\n            })]\n          })]\n        })\n      });\n    }\n  };\n\n  return render();\n}"]}}